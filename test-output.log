# github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/test-summary
cmd/test-summary/main.go:79:2: fmt.Println arg list ends with redundant newline
cmd/test-summary/main.go:233:2: fmt.Println arg list ends with redundant newline
cmd/test-summary/main.go:236:2: fmt.Println arg list ends with redundant newline
cmd/test-summary/main.go:238:2: fmt.Println arg list ends with redundant newline
# github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/test-rancher-async
cmd/test-rancher-async/main.go:18:2: fmt.Println arg list ends with redundant newline
=== RUN   Example_version
--- PASS: Example_version (0.00s)
PASS
ok  	github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/kubernetes-mcp-server	0.259s
?   	github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/test-rancher	[no test files]
FAIL	github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/test-rancher-async [build failed]
?   	github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/test-rancher-mcp	[no test files]
FAIL	github.com/netSkopePlatformEng/kubernetes-mcp-server/cmd/test-summary [build failed]
?   	github.com/netSkopePlatformEng/kubernetes-mcp-server/internal/test	[no test files]
=== RUN   TestReadConfigMissingFile
=== RUN   TestReadConfigMissingFile/returns_error_for_missing_file
--- PASS: TestReadConfigMissingFile (0.00s)
    --- PASS: TestReadConfigMissingFile/returns_error_for_missing_file (0.00s)
=== RUN   TestReadConfigInvalid
=== RUN   TestReadConfigInvalid/returns_error_for_invalid_file
=== RUN   TestReadConfigInvalid/error_message_contains_toml_error_with_line_number
--- PASS: TestReadConfigInvalid (0.00s)
    --- PASS: TestReadConfigInvalid/returns_error_for_invalid_file (0.00s)
    --- PASS: TestReadConfigInvalid/error_message_contains_toml_error_with_line_number (0.00s)
=== RUN   TestReadConfigValid
=== RUN   TestReadConfigValid/reads_and_unmarshalls_file
=== RUN   TestReadConfigValid/denied_resources_are_parsed_correctly
=== RUN   TestReadConfigValid/log_level_parsed_correctly
=== RUN   TestReadConfigValid/port_parsed_correctly
=== RUN   TestReadConfigValid/sse_base_url_parsed_correctly
=== RUN   TestReadConfigValid/kubeconfig_parsed_correctly
=== RUN   TestReadConfigValid/list_output_parsed_correctly
=== RUN   TestReadConfigValid/read_only_parsed_correctly
=== RUN   TestReadConfigValid/disable_destructive_parsed_correctly
=== RUN   TestReadConfigValid/enabled_tools_parsed_correctly
=== RUN   TestReadConfigValid/disabled_tools_parsed_correctly
--- PASS: TestReadConfigValid (0.00s)
    --- PASS: TestReadConfigValid/reads_and_unmarshalls_file (0.00s)
    --- PASS: TestReadConfigValid/denied_resources_are_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/log_level_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/port_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/sse_base_url_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/kubeconfig_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/list_output_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/read_only_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/disable_destructive_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/enabled_tools_parsed_correctly (0.00s)
    --- PASS: TestReadConfigValid/disabled_tools_parsed_correctly (0.00s)
PASS
ok  	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/config	(cached)
?   	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/helm	[no test files]
=== RUN   TestParseJWTClaimsPayloadValid
=== RUN   TestParseJWTClaimsPayloadValid/Is_parseable
=== RUN   TestParseJWTClaimsPayloadValid/Parses_issuer
=== RUN   TestParseJWTClaimsPayloadValid/Parses_audience
=== RUN   TestParseJWTClaimsPayloadValid/Parses_expiration
=== RUN   TestParseJWTClaimsPayloadValid/Parses_scope
=== RUN   TestParseJWTClaimsPayloadValid/Parses_expired_token
--- PASS: TestParseJWTClaimsPayloadValid (0.00s)
    --- PASS: TestParseJWTClaimsPayloadValid/Is_parseable (0.00s)
    --- PASS: TestParseJWTClaimsPayloadValid/Parses_issuer (0.00s)
    --- PASS: TestParseJWTClaimsPayloadValid/Parses_audience (0.00s)
    --- PASS: TestParseJWTClaimsPayloadValid/Parses_expiration (0.00s)
    --- PASS: TestParseJWTClaimsPayloadValid/Parses_scope (0.00s)
    --- PASS: TestParseJWTClaimsPayloadValid/Parses_expired_token (0.00s)
=== RUN   TestParseJWTClaimsPayloadInvalid
=== RUN   TestParseJWTClaimsPayloadInvalid/invalid_token_segments
=== RUN   TestParseJWTClaimsPayloadInvalid/invalid_base64_payload
--- PASS: TestParseJWTClaimsPayloadInvalid (0.00s)
    --- PASS: TestParseJWTClaimsPayloadInvalid/invalid_token_segments (0.00s)
    --- PASS: TestParseJWTClaimsPayloadInvalid/invalid_base64_payload (0.00s)
=== RUN   TestJWTTokenValidateOffline
=== RUN   TestJWTTokenValidateOffline/expired_token_returns_error
=== RUN   TestJWTTokenValidateOffline/multiple_audiences_with_correct_one
=== RUN   TestJWTTokenValidateOffline/multiple_audiences_with_mismatch_returns_error
--- PASS: TestJWTTokenValidateOffline (0.00s)
    --- PASS: TestJWTTokenValidateOffline/expired_token_returns_error (0.00s)
    --- PASS: TestJWTTokenValidateOffline/multiple_audiences_with_correct_one (0.00s)
    --- PASS: TestJWTTokenValidateOffline/multiple_audiences_with_mismatch_returns_error (0.00s)
=== RUN   TestJWTClaimsGetScopes
=== RUN   TestJWTClaimsGetScopes/no_scopes
=== RUN   TestJWTClaimsGetScopes/single_scope
=== RUN   TestJWTClaimsGetScopes/multiple_scopes
=== RUN   TestJWTClaimsGetScopes/scopes_with_extra_whitespace
--- PASS: TestJWTClaimsGetScopes (0.00s)
    --- PASS: TestJWTClaimsGetScopes/no_scopes (0.00s)
    --- PASS: TestJWTClaimsGetScopes/single_scope (0.00s)
    --- PASS: TestJWTClaimsGetScopes/multiple_scopes (0.00s)
    --- PASS: TestJWTClaimsGetScopes/scopes_with_extra_whitespace (0.00s)
=== RUN   TestGracefulShutdown
=== RUN   TestGracefulShutdown/Stops_gracefully
=== RUN   TestGracefulShutdown/Stops_on_context_cancel
=== RUN   TestGracefulShutdown/Starts_server_shutdown
=== RUN   TestGracefulShutdown/Server_shutdown_completes
E1020 10:55:01.204511   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestGracefulShutdown1608821816/001/config: no such file or directory"
--- PASS: TestGracefulShutdown (0.01s)
    --- PASS: TestGracefulShutdown/Stops_gracefully (0.00s)
    --- PASS: TestGracefulShutdown/Stops_on_context_cancel (0.00s)
    --- PASS: TestGracefulShutdown/Starts_server_shutdown (0.00s)
    --- PASS: TestGracefulShutdown/Server_shutdown_completes (0.00s)
=== RUN   TestSseTransport
=== RUN   TestSseTransport/Exposes_SSE_endpoint_at_/sse
=== RUN   TestSseTransport/SSE_endpoint_returns_text/event-stream_content_type
=== RUN   TestSseTransport/SSE_endpoint_returns_stream_with_messages_endpoint
=== RUN   TestSseTransport/Exposes_message_endpoint_at_/message
E1020 10:55:01.210406   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestSseTransport3558101734/001/config: no such file or directory"
--- PASS: TestSseTransport (0.01s)
    --- PASS: TestSseTransport/Exposes_SSE_endpoint_at_/sse (0.00s)
    --- PASS: TestSseTransport/SSE_endpoint_returns_text/event-stream_content_type (0.00s)
    --- PASS: TestSseTransport/SSE_endpoint_returns_stream_with_messages_endpoint (0.00s)
    --- PASS: TestSseTransport/Exposes_message_endpoint_at_/message (0.00s)
=== RUN   TestStreamableHttpTransport
=== RUN   TestStreamableHttpTransport/Exposes_MCP_GET_endpoint_at_/mcp
=== RUN   TestStreamableHttpTransport/MCP_GET_endpoint_returns_text/event-stream_content_type
=== RUN   TestStreamableHttpTransport/Exposes_MCP_POST_endpoint_at_/mcp
=== RUN   TestStreamableHttpTransport/MCP_POST_endpoint_returns_application/json_content_type
E1020 10:55:01.215763   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestStreamableHttpTransport2240165533/001/config: no such file or directory"
--- PASS: TestStreamableHttpTransport (0.01s)
    --- PASS: TestStreamableHttpTransport/Exposes_MCP_GET_endpoint_at_/mcp (0.00s)
    --- PASS: TestStreamableHttpTransport/MCP_GET_endpoint_returns_text/event-stream_content_type (0.00s)
    --- PASS: TestStreamableHttpTransport/Exposes_MCP_POST_endpoint_at_/mcp (0.00s)
    --- PASS: TestStreamableHttpTransport/MCP_POST_endpoint_returns_application/json_content_type (0.00s)
=== RUN   TestHealthCheck
=== RUN   TestHealthCheck/Exposes_health_check_endpoint_at_/healthz
=== RUN   TestHealthCheck/Health_check_with_OAuth_returns_HTTP_200_OK
E1020 10:55:01.222226   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestHealthCheck4066164542/001/config: no such file or directory"
E1020 10:55:01.222372   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestHealthCheck4066164542/002/config: no such file or directory"
--- PASS: TestHealthCheck (0.01s)
    --- PASS: TestHealthCheck/Exposes_health_check_endpoint_at_/healthz (0.00s)
    --- PASS: TestHealthCheck/Health_check_with_OAuth_returns_HTTP_200_OK (0.00s)
=== RUN   TestWellKnownReverseProxy
=== RUN   TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-authorization-server'_without_Authorization_URL_returns_404_-_Not_Found
=== RUN   TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-protected-resource'_without_Authorization_URL_returns_404_-_Not_Found
=== RUN   TestWellKnownReverseProxy/Protected_resource_'.well-known/openid-configuration'_without_Authorization_URL_returns_404_-_Not_Found
=== RUN   TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-authorization-server'_with_invalid_Authorization_URL_payload_returns_500_-_Internal_Server_Error
=== RUN   TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-protected-resource'_with_invalid_Authorization_URL_payload_returns_500_-_Internal_Server_Error
=== RUN   TestWellKnownReverseProxy/Protected_resource_'.well-known/openid-configuration'_with_invalid_Authorization_URL_payload_returns_500_-_Internal_Server_Error
=== RUN   TestWellKnownReverseProxy/Exposes_.well-known/oauth-authorization-server_endpoint
=== RUN   TestWellKnownReverseProxy/.well-known/oauth-authorization-server_returns_application/json_content_type
=== RUN   TestWellKnownReverseProxy/Exposes_.well-known/oauth-protected-resource_endpoint
=== RUN   TestWellKnownReverseProxy/.well-known/oauth-protected-resource_returns_application/json_content_type
=== RUN   TestWellKnownReverseProxy/Exposes_.well-known/openid-configuration_endpoint
=== RUN   TestWellKnownReverseProxy/.well-known/openid-configuration_returns_application/json_content_type
E1020 10:55:01.234264   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestWellKnownReverseProxy4001235720/001/config: no such file or directory"
E1020 10:55:01.234369   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestWellKnownReverseProxy4001235720/003/config: no such file or directory"
E1020 10:55:01.234557   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestWellKnownReverseProxy4001235720/002/config: no such file or directory"
--- PASS: TestWellKnownReverseProxy (0.01s)
    --- PASS: TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-authorization-server'_without_Authorization_URL_returns_404_-_Not_Found (0.00s)
    --- PASS: TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-protected-resource'_without_Authorization_URL_returns_404_-_Not_Found (0.00s)
    --- PASS: TestWellKnownReverseProxy/Protected_resource_'.well-known/openid-configuration'_without_Authorization_URL_returns_404_-_Not_Found (0.00s)
    --- PASS: TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-authorization-server'_with_invalid_Authorization_URL_payload_returns_500_-_Internal_Server_Error (0.00s)
    --- PASS: TestWellKnownReverseProxy/Protected_resource_'.well-known/oauth-protected-resource'_with_invalid_Authorization_URL_payload_returns_500_-_Internal_Server_Error (0.00s)
    --- PASS: TestWellKnownReverseProxy/Protected_resource_'.well-known/openid-configuration'_with_invalid_Authorization_URL_payload_returns_500_-_Internal_Server_Error (0.00s)
    --- PASS: TestWellKnownReverseProxy/Exposes_.well-known/oauth-authorization-server_endpoint (0.00s)
    --- PASS: TestWellKnownReverseProxy/.well-known/oauth-authorization-server_returns_application/json_content_type (0.00s)
    --- PASS: TestWellKnownReverseProxy/Exposes_.well-known/oauth-protected-resource_endpoint (0.00s)
    --- PASS: TestWellKnownReverseProxy/.well-known/oauth-protected-resource_returns_application/json_content_type (0.00s)
    --- PASS: TestWellKnownReverseProxy/Exposes_.well-known/openid-configuration_endpoint (0.00s)
    --- PASS: TestWellKnownReverseProxy/.well-known/openid-configuration_returns_application/json_content_type (0.00s)
=== RUN   TestWellKnownOverrides
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_removes_registration_endpoint_field
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_sets_require_request_uri_registration_=_false
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_includes/preserves_scopes_supported
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_removes_registration_endpoint_field#01
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_sets_require_request_uri_registration_=_false#01
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_includes/preserves_scopes_supported#01
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_removes_registration_endpoint_field#02
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_sets_require_request_uri_registration_=_false#02
=== RUN   TestWellKnownOverrides/DisableDynamicClientRegistration_includes/preserves_scopes_supported#02
=== RUN   TestWellKnownOverrides/OAuthScopes_overrides_scopes_supported
=== RUN   TestWellKnownOverrides/OAuthScopes_preserves_other_fields
=== RUN   TestWellKnownOverrides/OAuthScopes_overrides_scopes_supported#01
=== RUN   TestWellKnownOverrides/OAuthScopes_preserves_other_fields#01
=== RUN   TestWellKnownOverrides/OAuthScopes_overrides_scopes_supported#02
=== RUN   TestWellKnownOverrides/OAuthScopes_preserves_other_fields#02
E1020 10:55:01.242075   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestWellKnownOverrides4018996500/001/config: no such file or directory"
E1020 10:55:01.242220   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestWellKnownOverrides4018996500/002/config: no such file or directory"
--- PASS: TestWellKnownOverrides (0.01s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_removes_registration_endpoint_field (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_sets_require_request_uri_registration_=_false (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_includes/preserves_scopes_supported (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_removes_registration_endpoint_field#01 (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_sets_require_request_uri_registration_=_false#01 (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_includes/preserves_scopes_supported#01 (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_removes_registration_endpoint_field#02 (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_sets_require_request_uri_registration_=_false#02 (0.00s)
    --- PASS: TestWellKnownOverrides/DisableDynamicClientRegistration_includes/preserves_scopes_supported#02 (0.00s)
    --- PASS: TestWellKnownOverrides/OAuthScopes_overrides_scopes_supported (0.00s)
    --- PASS: TestWellKnownOverrides/OAuthScopes_preserves_other_fields (0.00s)
    --- PASS: TestWellKnownOverrides/OAuthScopes_overrides_scopes_supported#01 (0.00s)
    --- PASS: TestWellKnownOverrides/OAuthScopes_preserves_other_fields#01 (0.00s)
    --- PASS: TestWellKnownOverrides/OAuthScopes_overrides_scopes_supported#02 (0.00s)
    --- PASS: TestWellKnownOverrides/OAuthScopes_preserves_other_fields#02 (0.00s)
=== RUN   TestMiddlewareLogging
=== RUN   TestMiddlewareLogging/Logs_HTTP_requests_and_responses
=== RUN   TestMiddlewareLogging/Logs_HTTP_request_duration
E1020 10:55:01.245587   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestMiddlewareLogging2807170767/001/config: no such file or directory"
--- PASS: TestMiddlewareLogging (0.00s)
    --- PASS: TestMiddlewareLogging/Logs_HTTP_requests_and_responses (0.00s)
    --- PASS: TestMiddlewareLogging/Logs_HTTP_request_duration (0.00s)
=== RUN   TestAuthorizationUnauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_MISSING_Authorization_header_returns_401_-_Unauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_MISSING_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_MISSING_Authorization_header_logs_error
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INCOMPATIBLE_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INCOMPATIBLE_Authorization_header_logs_error
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_Authorization_header_returns_401_-_Unauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_Authorization_header_logs_error
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_EXPIRED_Authorization_header_returns_401_-_Unauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_EXPIRED_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_EXPIRED_Authorization_header_logs_error
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_AUDIENCE_Authorization_header_returns_401_-_Unauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_AUDIENCE_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_AUDIENCE_Authorization_header_logs_error
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_OIDC_Authorization_header_returns_401_-_Unauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_OIDC_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_OIDC_Authorization_header_logs_error
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_KUBERNETES_Authorization_header_returns_401_-_Unauthorized
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_KUBERNETES_Authorization_header_returns_WWW-Authenticate_header
=== RUN   TestAuthorizationUnauthorized/Protected_resource_with_INVALID_KUBERNETES_Authorization_header_logs_error
E1020 10:55:01.436395   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/007/config: no such file or directory"
E1020 10:55:01.436547   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/001/config: no such file or directory"
E1020 10:55:01.436692   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/006/config: no such file or directory"
E1020 10:55:01.436854   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/003/config: no such file or directory"
E1020 10:55:01.436994   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/004/config: no such file or directory"
E1020 10:55:01.437139   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/005/config: no such file or directory"
E1020 10:55:01.437284   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationUnauthorized2322678792/002/config: no such file or directory"
--- PASS: TestAuthorizationUnauthorized (0.19s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_MISSING_Authorization_header_returns_401_-_Unauthorized (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_MISSING_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_MISSING_Authorization_header_logs_error (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INCOMPATIBLE_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INCOMPATIBLE_Authorization_header_logs_error (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_Authorization_header_returns_401_-_Unauthorized (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_Authorization_header_logs_error (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_EXPIRED_Authorization_header_returns_401_-_Unauthorized (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_EXPIRED_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_EXPIRED_Authorization_header_logs_error (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_AUDIENCE_Authorization_header_returns_401_-_Unauthorized (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_AUDIENCE_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_AUDIENCE_Authorization_header_logs_error (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_OIDC_Authorization_header_returns_401_-_Unauthorized (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_OIDC_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_OIDC_Authorization_header_logs_error (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_KUBERNETES_Authorization_header_returns_401_-_Unauthorized (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_KUBERNETES_Authorization_header_returns_WWW-Authenticate_header (0.00s)
    --- PASS: TestAuthorizationUnauthorized/Protected_resource_with_INVALID_KUBERNETES_Authorization_header_logs_error (0.00s)
=== RUN   TestAuthorizationRequireOAuthFalse
=== RUN   TestAuthorizationRequireOAuthFalse/Protected_resource_with_MISSING_Authorization_header_returns_200_-_OK)
E1020 10:55:01.448359   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationRequireOAuthFalse1615654209/001/config: no such file or directory"
--- PASS: TestAuthorizationRequireOAuthFalse (0.01s)
    --- PASS: TestAuthorizationRequireOAuthFalse/Protected_resource_with_MISSING_Authorization_header_returns_200_-_OK) (0.00s)
=== RUN   TestAuthorizationRawToken
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'false',_with_VALID_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'false',_with_VALID_Authorization_header_performs_token_validation_accordingly
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'true',_with_VALID_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'true',_with_VALID_Authorization_header_performs_token_validation_accordingly
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'false',_with_VALID_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'false',_with_VALID_Authorization_header_performs_token_validation_accordingly
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'true',_with_VALID_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'true',_with_VALID_Authorization_header_performs_token_validation_accordingly
E1020 10:55:01.469531   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationRawToken1375253073/001/config: no such file or directory"
E1020 10:55:01.469611   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationRawToken1375253073/003/config: no such file or directory"
E1020 10:55:01.469759   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationRawToken1375253073/004/config: no such file or directory"
E1020 10:55:01.469905   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationRawToken1375253073/002/config: no such file or directory"
--- PASS: TestAuthorizationRawToken (0.02s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'false',_with_VALID_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'false',_with_VALID_Authorization_header_performs_token_validation_accordingly (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'true',_with_VALID_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_''_and_validate-token_=_'true',_with_VALID_Authorization_header_performs_token_validation_accordingly (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'false',_with_VALID_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'false',_with_VALID_Authorization_header_performs_token_validation_accordingly (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'true',_with_VALID_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationRawToken/Protected_resource_with_audience_=_'mcp-server'_and_validate-token_=_'true',_with_VALID_Authorization_header_performs_token_validation_accordingly (0.00s)
=== RUN   TestAuthorizationOidcToken
=== RUN   TestAuthorizationOidcToken/Protected_resource_with_validate-token='false'_with_VALID_OIDC_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationOidcToken/Protected_resource_with_validate-token='false'_with_VALID_OIDC_Authorization_header_performs_token_validation_accordingly
=== RUN   TestAuthorizationOidcToken/Protected_resource_with_validate-token='true'_with_VALID_OIDC_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationOidcToken/Protected_resource_with_validate-token='true'_with_VALID_OIDC_Authorization_header_performs_token_validation_accordingly
E1020 10:55:01.541026   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationOidcToken369741790/001/config: no such file or directory"
E1020 10:55:01.541145   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationOidcToken369741790/002/config: no such file or directory"
--- PASS: TestAuthorizationOidcToken (0.07s)
    --- PASS: TestAuthorizationOidcToken/Protected_resource_with_validate-token='false'_with_VALID_OIDC_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationOidcToken/Protected_resource_with_validate-token='false'_with_VALID_OIDC_Authorization_header_performs_token_validation_accordingly (0.00s)
    --- PASS: TestAuthorizationOidcToken/Protected_resource_with_validate-token='true'_with_VALID_OIDC_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationOidcToken/Protected_resource_with_validate-token='true'_with_VALID_OIDC_Authorization_header_performs_token_validation_accordingly (0.00s)
=== RUN   TestAuthorizationOidcTokenExchange
=== RUN   TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='false'_with_VALID_OIDC_EXCHANGE_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='false'_with_VALID_OIDC_EXCHANGE_Authorization_header_performs_token_validation_accordingly
=== RUN   TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='true'_with_VALID_OIDC_EXCHANGE_Authorization_header_returns_200_-_OK
=== RUN   TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='true'_with_VALID_OIDC_EXCHANGE_Authorization_header_performs_token_validation_accordingly
E1020 10:55:01.835379   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationOidcTokenExchange2585443314/001/config: no such file or directory"
E1020 10:55:01.835534   12400 mcp.go:208] "Failed to create single-cluster manager" err="stat /var/folders/cz/fp9qpfkx45qdnxxr74nxqqdm0000gn/T/TestAuthorizationOidcTokenExchange2585443314/002/config: no such file or directory"
--- PASS: TestAuthorizationOidcTokenExchange (0.29s)
    --- PASS: TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='false'_with_VALID_OIDC_EXCHANGE_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='false'_with_VALID_OIDC_EXCHANGE_Authorization_header_performs_token_validation_accordingly (0.00s)
    --- PASS: TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='true'_with_VALID_OIDC_EXCHANGE_Authorization_header_returns_200_-_OK (0.00s)
    --- PASS: TestAuthorizationOidcTokenExchange/Protected_resource_with_validate-token='true'_with_VALID_OIDC_EXCHANGE_Authorization_header_performs_token_validation_accordingly (0.00s)
=== RUN   TestIsEnabled
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:<nil>_ClientId:_ClientSecret:_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:<nil>_ClientId:_ClientSecret:_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false#01
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:0x1400056c160_ClientId:_ClientSecret:_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:0x1400056c2c0_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:<nil>_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_false
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:0x1400056c370_ClientId:_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_false
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:0x1400056c420_ClientId:test-client-id_ClientSecret:_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_true
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:0x1400056c4d0_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_true
=== RUN   TestIsEnabled/SecurityTokenService{{Provider:0x1400056c580_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[test-scope]}}.IsEnabled()_=_true
--- PASS: TestIsEnabled (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:<nil>_ClientId:_ClientSecret:_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:<nil>_ClientId:_ClientSecret:_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false#01 (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:0x1400056c160_ClientId:_ClientSecret:_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:0x1400056c2c0_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:_ExternalAccountScopes:[]}}.IsEnabled()_=_false (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:<nil>_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_false (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:0x1400056c370_ClientId:_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_false (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:0x1400056c420_ClientId:test-client-id_ClientSecret:_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_true (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:0x1400056c4d0_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[]}}.IsEnabled()_=_true (0.00s)
    --- PASS: TestIsEnabled/SecurityTokenService{{Provider:0x1400056c580_ClientId:test-client-id_ClientSecret:test-client-secret_ExternalAccountAudience:test-audience_ExternalAccountScopes:[test-scope]}}.IsEnabled()_=_true (0.00s)
=== RUN   TestExternalAccountTokenExchange
=== RUN   TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_missing_token_source_returns_error
=== RUN   TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_invalid_token_returns_error
=== RUN   TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_returns_new_token
=== RUN   TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_sends_POST_request
=== RUN   TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_has_correct_form_data
=== RUN   TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_sends_correct_client_credentials_header
--- PASS: TestExternalAccountTokenExchange (0.00s)
    --- PASS: TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_missing_token_source_returns_error (0.00s)
    --- PASS: TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_invalid_token_returns_error (0.00s)
    --- PASS: TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_returns_new_token (0.00s)
    --- PASS: TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_sends_POST_request (0.00s)
    --- PASS: TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_has_correct_form_data (0.00s)
    --- PASS: TestExternalAccountTokenExchange/ExternalAccountTokenExchange_with_valid_token_sends_correct_client_credentials_header (0.00s)
PASS
ok  	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/http	(cached)
=== RUN   TestKubernetes_IsInCluster
=== RUN   TestKubernetes_IsInCluster/with_explicit_kubeconfig
=== RUN   TestKubernetes_IsInCluster/with_empty_kubeconfig_and_in_cluster
=== RUN   TestKubernetes_IsInCluster/with_empty_kubeconfig_and_not_in_cluster_(empty)
=== RUN   TestKubernetes_IsInCluster/with_empty_kubeconfig_and_not_in_cluster_(error)
--- PASS: TestKubernetes_IsInCluster (0.00s)
    --- PASS: TestKubernetes_IsInCluster/with_explicit_kubeconfig (0.00s)
    --- PASS: TestKubernetes_IsInCluster/with_empty_kubeconfig_and_in_cluster (0.00s)
    --- PASS: TestKubernetes_IsInCluster/with_empty_kubeconfig_and_not_in_cluster_(empty) (0.00s)
    --- PASS: TestKubernetes_IsInCluster/with_empty_kubeconfig_and_not_in_cluster_(error) (0.00s)
=== RUN   TestKubernetes_ResolveKubernetesConfigurations_Explicit
=== RUN   TestKubernetes_ResolveKubernetesConfigurations_Explicit/with_missing_file
=== RUN   TestKubernetes_ResolveKubernetesConfigurations_Explicit/with_empty_file
=== RUN   TestKubernetes_ResolveKubernetesConfigurations_Explicit/with_valid_file
--- PASS: TestKubernetes_ResolveKubernetesConfigurations_Explicit (0.00s)
    --- PASS: TestKubernetes_ResolveKubernetesConfigurations_Explicit/with_missing_file (0.00s)
    --- PASS: TestKubernetes_ResolveKubernetesConfigurations_Explicit/with_empty_file (0.00s)
    --- PASS: TestKubernetes_ResolveKubernetesConfigurations_Explicit/with_valid_file (0.00s)
=== RUN   TestClusterHealthState_String
=== RUN   TestClusterHealthState_String/unknown
=== RUN   TestClusterHealthState_String/healthy
=== RUN   TestClusterHealthState_String/degraded
=== RUN   TestClusterHealthState_String/unhealthy
=== RUN   TestClusterHealthState_String/unknown#01
--- PASS: TestClusterHealthState_String (0.00s)
    --- PASS: TestClusterHealthState_String/unknown (0.00s)
    --- PASS: TestClusterHealthState_String/healthy (0.00s)
    --- PASS: TestClusterHealthState_String/degraded (0.00s)
    --- PASS: TestClusterHealthState_String/unhealthy (0.00s)
    --- PASS: TestClusterHealthState_String/unknown#01 (0.00s)
=== RUN   TestCircuitBreakerState_String
=== RUN   TestCircuitBreakerState_String/closed
=== RUN   TestCircuitBreakerState_String/open
=== RUN   TestCircuitBreakerState_String/half-open
=== RUN   TestCircuitBreakerState_String/unknown
--- PASS: TestCircuitBreakerState_String (0.00s)
    --- PASS: TestCircuitBreakerState_String/closed (0.00s)
    --- PASS: TestCircuitBreakerState_String/open (0.00s)
    --- PASS: TestCircuitBreakerState_String/half-open (0.00s)
    --- PASS: TestCircuitBreakerState_String/unknown (0.00s)
=== RUN   TestDefaultClusterHealthConfig
--- PASS: TestDefaultClusterHealthConfig (0.00s)
=== RUN   TestNewClusterHealthMonitor
--- PASS: TestNewClusterHealthMonitor (0.00s)
=== RUN   TestClusterHealthMonitor_StartStop
I1020 10:58:52.786195   12850 health.go:109] "Starting cluster health monitor" clusters=2
I1020 10:58:52.786226   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_StartStop (0.00s)
=== RUN   TestClusterHealthMonitor_HealthyCluster
I1020 10:58:52.786245   12850 health.go:109] "Starting cluster health monitor" clusters=1
I1020 10:58:52.937354   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_HealthyCluster (0.15s)
=== RUN   TestClusterHealthMonitor_FailingCluster
I1020 10:58:52.937425   12850 health.go:109] "Starting cluster health monitor" clusters=1
I1020 10:58:52.986282   12850 health.go:218] "Circuit breaker opened for cluster" cluster="failing-cluster" failures=2
I1020 10:58:53.098522   12850 health.go:218] "Circuit breaker opened for cluster" cluster="failing-cluster" failures=3
I1020 10:58:53.138080   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_FailingCluster (0.20s)
=== RUN   TestClusterHealthMonitor_CircuitBreakerRecovery
I1020 10:58:53.138188   12850 health.go:109] "Starting cluster health monitor" clusters=1
I1020 10:58:53.178425   12850 health.go:218] "Circuit breaker opened for cluster" cluster="recovery-cluster" failures=2
I1020 10:58:53.243466   12850 health.go:218] "Circuit breaker opened for cluster" cluster="recovery-cluster" failures=3
I1020 10:58:53.299311   12850 health.go:236] "Cluster health restored" cluster="recovery-cluster"
I1020 10:58:53.443907   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_CircuitBreakerRecovery (0.31s)
=== RUN   TestClusterHealthMonitor_HalfOpenState
I1020 10:58:53.443994   12850 health.go:109] "Starting cluster health monitor" clusters=1
I1020 10:58:53.485252   12850 health.go:218] "Circuit breaker opened for cluster" cluster="half-open-cluster" failures=2
I1020 10:58:53.545052   12850 health.go:218] "Circuit breaker opened for cluster" cluster="half-open-cluster" failures=3
I1020 10:58:53.605056   12850 health.go:218] "Circuit breaker opened for cluster" cluster="half-open-cluster" failures=4
I1020 10:58:53.665046   12850 health.go:236] "Cluster health restored" cluster="half-open-cluster"
I1020 10:58:53.845190   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_HalfOpenState (0.40s)
=== RUN   TestClusterHealthMonitor_AddRemoveCluster
--- PASS: TestClusterHealthMonitor_AddRemoveCluster (0.00s)
=== RUN   TestClusterHealthMonitor_GetAllStatuses
--- PASS: TestClusterHealthMonitor_GetAllStatuses (0.00s)
=== RUN   TestClusterHealthMonitor_GetHealthySummary
--- PASS: TestClusterHealthMonitor_GetHealthySummary (0.00s)
=== RUN   TestClusterHealthMonitor_ConcurrentAccess
I1020 10:58:53.845341   12850 health.go:109] "Starting cluster health monitor" clusters=3
I1020 10:58:53.846977   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_ConcurrentAccess (0.00s)
=== RUN   TestClusterHealthMonitor_ContextCancellation
I1020 10:58:53.847047   12850 health.go:109] "Starting cluster health monitor" clusters=1
I1020 10:58:53.999166   12850 health.go:130] "Stopping cluster health monitor"
--- PASS: TestClusterHealthMonitor_ContextCancellation (0.15s)
=== RUN   TestManager_Derived
=== RUN   TestManager_Derived/without_authorization_header_returns_original_manager
=== RUN   TestManager_Derived/with_invalid_authorization_header_returns_original_manager
=== RUN   TestManager_Derived/with_valid_bearer_token_creates_derived_manager_with_correct_configuration
=== RUN   TestManager_Derived/with_RequireOAuth=true_and_no_authorization_header_returns_oauth_token_required_error
=== RUN   TestManager_Derived/with_RequireOAuth=true_and_invalid_authorization_header_returns_oauth_token_required_error
=== RUN   TestManager_Derived/with_RequireOAuth=true_and_valid_bearer_token_creates_derived_manager
--- PASS: TestManager_Derived (0.00s)
    --- PASS: TestManager_Derived/without_authorization_header_returns_original_manager (0.00s)
    --- PASS: TestManager_Derived/with_invalid_authorization_header_returns_original_manager (0.00s)
    --- PASS: TestManager_Derived/with_valid_bearer_token_creates_derived_manager_with_correct_configuration (0.00s)
    --- PASS: TestManager_Derived/with_RequireOAuth=true_and_no_authorization_header_returns_oauth_token_required_error (0.00s)
    --- PASS: TestManager_Derived/with_RequireOAuth=true_and_invalid_authorization_header_returns_oauth_token_required_error (0.00s)
    --- PASS: TestManager_Derived/with_RequireOAuth=true_and_valid_bearer_token_creates_derived_manager (0.00s)
=== RUN   TestManager_ResourceCleanup
=== RUN   TestManager_ResourceCleanup/Close_calls_all_cleanup_functions
=== RUN   TestManager_ResourceCleanup/Close_handles_cleanup_function_errors_gracefully
E1020 10:58:54.002905   12850 kubernetes.go:255] Error during cleanup: cleanup failed
E1020 10:58:54.002914   12850 kubernetes.go:255] Error during cleanup: another cleanup failed
=== RUN   TestManager_ResourceCleanup/Context_cancellation_stops_long-running_operations
=== RUN   TestManager_ResourceCleanup/Multiple_Close_calls_are_safe
    kubernetes_test.go:539: expected cleanup to be called once, got 3 calls
=== RUN   TestManager_ResourceCleanup/RegisterCleanup_after_Close_does_not_add_functions
    kubernetes_test.go:558: This cleanup function should not be called
=== RUN   TestManager_ResourceCleanup/Discovery_client_cache_is_invalidated_on_Close
--- FAIL: TestManager_ResourceCleanup (0.00s)
    --- PASS: TestManager_ResourceCleanup/Close_calls_all_cleanup_functions (0.00s)
    --- PASS: TestManager_ResourceCleanup/Close_handles_cleanup_function_errors_gracefully (0.00s)
    --- PASS: TestManager_ResourceCleanup/Context_cancellation_stops_long-running_operations (0.00s)
    --- FAIL: TestManager_ResourceCleanup/Multiple_Close_calls_are_safe (0.00s)
    --- FAIL: TestManager_ResourceCleanup/RegisterCleanup_after_Close_does_not_add_functions (0.00s)
    --- PASS: TestManager_ResourceCleanup/Discovery_client_cache_is_invalidated_on_Close (0.00s)
=== RUN   TestKubernetes_ResourceCleanup
=== RUN   TestKubernetes_ResourceCleanup/Single_cluster_mode_cleanup
=== RUN   TestKubernetes_ResourceCleanup/Multi-cluster_mode_cleanup
I1020 10:58:54.004962   12850 multicluster.go:58] "Starting multi-cluster manager"
I1020 10:58:54.005542   12850 health.go:109] "Starting cluster health monitor" clusters=2
I1020 10:58:54.005552   12850 multicluster.go:85] "Multi-cluster manager started" clusters=2 active="cluster1"
I1020 10:58:54.005556   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.005560   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.005565   12850 multicluster.go:106] "Multi-cluster manager stopped"
    kubernetes_test.go:688: Expected nil clusters after Close
--- FAIL: TestKubernetes_ResourceCleanup (0.00s)
    --- PASS: TestKubernetes_ResourceCleanup/Single_cluster_mode_cleanup (0.00s)
    --- FAIL: TestKubernetes_ResourceCleanup/Multi-cluster_mode_cleanup (0.00s)
=== RUN   TestMultiClusterManager_ResourceCleanup
=== RUN   TestMultiClusterManager_ResourceCleanup/MultiClusterManager_Stop_cleans_up_all_cluster_managers
I1020 10:58:54.006873   12850 multicluster.go:58] "Starting multi-cluster manager"
I1020 10:58:54.007433   12850 health.go:109] "Starting cluster health monitor" clusters=2
I1020 10:58:54.007441   12850 multicluster.go:85] "Multi-cluster manager started" clusters=2 active="cluster1"
I1020 10:58:54.007444   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.007446   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.007449   12850 multicluster.go:106] "Multi-cluster manager stopped"
=== RUN   TestMultiClusterManager_ResourceCleanup/MultiClusterManager_handles_health_monitor_cleanup
I1020 10:58:54.007462   12850 multicluster.go:58] "Starting multi-cluster manager"
I1020 10:58:54.007880   12850 health.go:109] "Starting cluster health monitor" clusters=2
I1020 10:58:54.007885   12850 multicluster.go:85] "Multi-cluster manager started" clusters=2 active="cluster1"
I1020 10:58:54.007887   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.007890   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.007892   12850 multicluster.go:106] "Multi-cluster manager stopped"
=== RUN   TestMultiClusterManager_ResourceCleanup/MultiClusterManager_concurrent_cleanup_is_safe
I1020 10:58:54.007902   12850 multicluster.go:58] "Starting multi-cluster manager"
I1020 10:58:54.008512   12850 health.go:109] "Starting cluster health monitor" clusters=2
I1020 10:58:54.008521   12850 multicluster.go:85] "Multi-cluster manager started" clusters=2 active="cluster1"
I1020 10:58:54.008545   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008548   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008551   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008558   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008560   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008563   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008567   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008569   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008572   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008576   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008578   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008581   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008584   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008609   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008616   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008624   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008630   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008632   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008618   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008639   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008634   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008598   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008624   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008653   12850 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:54.008656   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008653   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008664   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008658   12850 multicluster.go:106] "Multi-cluster manager stopped"
I1020 10:58:54.008676   12850 health.go:130] "Stopping cluster health monitor"
I1020 10:58:54.008763   12850 multicluster.go:106] "Multi-cluster manager stopped"
--- PASS: TestMultiClusterManager_ResourceCleanup (0.00s)
    --- PASS: TestMultiClusterManager_ResourceCleanup/MultiClusterManager_Stop_cleans_up_all_cluster_managers (0.00s)
    --- PASS: TestMultiClusterManager_ResourceCleanup/MultiClusterManager_handles_health_monitor_cleanup (0.00s)
    --- PASS: TestMultiClusterManager_ResourceCleanup/MultiClusterManager_concurrent_cleanup_is_safe (0.00s)
=== RUN   TestScanKubeConfigDirectory
--- PASS: TestScanKubeConfigDirectory (0.00s)
=== RUN   TestScanKubeConfigDirectoryEmpty
--- PASS: TestScanKubeConfigDirectoryEmpty (0.00s)
=== RUN   TestScanKubeConfigDirectoryNotSet
--- PASS: TestScanKubeConfigDirectoryNotSet (0.00s)
=== RUN   TestScanKubeConfigDirectoryNonexistent
E1020 10:58:54.012002   12850 multicluster.go:190] "Error walking directory" err="lstat /nonexistent/path: no such file or directory" path="/nonexistent/path"
--- PASS: TestScanKubeConfigDirectoryNonexistent (0.00s)
=== RUN   TestApplyClusterAliases
--- PASS: TestApplyClusterAliases (0.00s)
=== RUN   TestDiscoverClustersIntegration
    multicluster_test.go:291: DiscoverClusters result: <nil>
--- PASS: TestDiscoverClustersIntegration (0.00s)
=== RUN   TestSwitchCluster
--- FAIL: TestSwitchCluster (0.00s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x2 addr=0x68 pc=0x105d2385c]

goroutine 93 [running]:
testing.tRunner.func1.2({0x1063d4e00, 0x107c28b90})
	/Users/jdambly/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.darwin-arm64/src/testing/testing.go:1734 +0x1ac
testing.tRunner.func1()
	/Users/jdambly/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.darwin-arm64/src/testing/testing.go:1737 +0x334
panic({0x1063d4e00?, 0x107c28b90?})
	/Users/jdambly/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.darwin-arm64/src/runtime/panic.go:792 +0x124
github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/kubernetes.(*MultiClusterManager).validateClusterConnection(0x14000111da0, 0x14000619f40?, {0x105d946b8, 0x8})
	/Volumes/Case-sensitive/repos/kubernetes-mcp-server/pkg/kubernetes/multicluster.go:426 +0x2c
github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/kubernetes.(*MultiClusterManager).SwitchCluster(0x14000111da0, {0x105d946b8, 0x8})
	/Volumes/Case-sensitive/repos/kubernetes-mcp-server/pkg/kubernetes/multicluster.go:327 +0x31c
github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/kubernetes.TestSwitchCluster(0x1400065e000)
	/Volumes/Case-sensitive/repos/kubernetes-mcp-server/pkg/kubernetes/multicluster_test.go:339 +0x268
testing.tRunner(0x1400065e000, 0x1067853a0)
	/Users/jdambly/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.darwin-arm64/src/testing/testing.go:1792 +0xe4
created by testing.(*T).Run in goroutine 1
	/Users/jdambly/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.darwin-arm64/src/testing/testing.go:1851 +0x374
FAIL	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/kubernetes	1.558s
=== RUN   TestVersion
--- PASS: TestVersion (0.00s)
=== RUN   TestConfig
=== RUN   TestConfig/defaults_to_none
    root_test.go:54: Expected config to be " - Config: ", got 0.0.0
         <nil>
=== RUN   TestConfig/set_with_--config
    root_test.go:66: Expected config to be (?m)\" - Config\:[^\"]+empty-config\.toml\", got 0.0.0
         <nil>
=== RUN   TestConfig/invalid_path_throws_error
Error: open invalid-path-to-config.toml: no such file or directory
Usage:
  kubernetes-mcp-server [command] [options] [flags]

Examples:
  # show this help
  kubernetes-mcp-server -h
  
  # shows version information
  kubernetes-mcp-server --version
  
  # start STDIO server
  kubernetes-mcp-server
  
  # start a SSE server on port 8080
  kubernetes-mcp-server --port 8080
  
  # start a SSE server on port 8443 with a public HTTPS host of example.com
  kubernetes-mcp-server --port 8443 --sse-base-url https://example.com:8443

Flags:
      --config string           Path of the config file. Each profile has its set of defaults.
      --disable-destructive     If true, tools annotated with destructiveHint=true are disabled
  -h, --help                    help for kubernetes-mcp-server
      --http-port int           Start a streamable HTTP server on the specified port (DEPRECATED: Use --port instead)
      --kubeconfig string       Path to the kubeconfig file to use for authentication
      --kubeconfig-dir string   Directory containing multiple kubeconfig files for multi-cluster support
      --list-output string      Output format for resource list operations (one of: yaml, table). Defaults to table. (default "table")
      --log-level int           Set the log level (from 0 to 9)
      --port string             Start a streamable HTTP and SSE HTTP server on the specified port (e.g. 8080)
      --profile string          MCP profile to use (one of: full) (default "full")
      --read-only               If true, only tools annotated with readOnlyHint=true are exposed
      --sse-base-url string     SSE public base URL to use when sending the endpoint message (e.g. https://example.com)
      --sse-port int            Start a SSE server on the specified port (DEPRECATED: Use --port instead)
      --version                 Print version information and quit

=== RUN   TestConfig/set_with_valid_--config
    root_test.go:91: Expected config to be (?m)\" - Config\:[^\"]+valid-config\.toml\", got 0.0.0
         <nil>
=== RUN   TestConfig/set_with_valid_--config,_flags_take_precedence
    root_test.go:115: Expected config to be (?m)\" - Config\:[^\"]+valid-config\.toml\", got 0.0.0
         <nil>
--- FAIL: TestConfig (0.00s)
    --- FAIL: TestConfig/defaults_to_none (0.00s)
    --- FAIL: TestConfig/set_with_--config (0.00s)
    --- PASS: TestConfig/invalid_path_throws_error (0.00s)
    --- FAIL: TestConfig/set_with_valid_--config (0.00s)
    --- FAIL: TestConfig/set_with_valid_--config,_flags_take_precedence (0.00s)
=== RUN   TestProfile
=== RUN   TestProfile/available
=== RUN   TestProfile/default
    root_test.go:147: Expected profile 'full', got 0.0.0
         <nil>
=== RUN   TestProfile/set_with_--profile
    root_test.go:157: Expected profile to be (?m)\" - Profile\: full\", got 0.0.0
         <nil>
--- FAIL: TestProfile (0.00s)
    --- PASS: TestProfile/available (0.00s)
    --- FAIL: TestProfile/default (0.00s)
    --- FAIL: TestProfile/set_with_--profile (0.00s)
=== RUN   TestListOutput
=== RUN   TestListOutput/available
=== RUN   TestListOutput/defaults_to_table
    root_test.go:177: Expected list-output 'table', got 0.0.0
         <nil>
=== RUN   TestListOutput/set_with_--list-output
    root_test.go:187: Expected list-output to be (?m)\" - ListOutput\: yaml\", got 0.0.0
         <nil>
--- FAIL: TestListOutput (0.00s)
    --- PASS: TestListOutput/available (0.00s)
    --- FAIL: TestListOutput/defaults_to_table (0.00s)
    --- FAIL: TestListOutput/set_with_--list-output (0.00s)
=== RUN   TestReadOnly
=== RUN   TestReadOnly/defaults_to_false
    root_test.go:198: Expected read-only mode false, got 0.0.0
         <nil>
=== RUN   TestReadOnly/set_with_--read-only
    root_test.go:208: Expected read-only mode to be (?m)\" - Read-only mode\: true\", got 0.0.0
         <nil>
--- FAIL: TestReadOnly (0.00s)
    --- FAIL: TestReadOnly/defaults_to_false (0.00s)
    --- FAIL: TestReadOnly/set_with_--read-only (0.00s)
=== RUN   TestDisableDestructive
=== RUN   TestDisableDestructive/defaults_to_false
    root_test.go:219: Expected disable destructive false, got 0.0.0
         <nil>
=== RUN   TestDisableDestructive/set_with_--disable-destructive
    root_test.go:229: Expected disable-destructive mode to be (?m)\" - Disable destructive tools\: true\", got 0.0.0
         <nil>
--- FAIL: TestDisableDestructive (0.00s)
    --- FAIL: TestDisableDestructive/defaults_to_false (0.00s)
    --- FAIL: TestDisableDestructive/set_with_--disable-destructive (0.00s)
=== RUN   TestAuthorizationURL
=== RUN   TestAuthorizationURL/invalid_authorization-url_without_protocol
Error: --authorization-url must be a valid URL
Usage:
  kubernetes-mcp-server [command] [options] [flags]

Examples:
  # show this help
  kubernetes-mcp-server -h
  
  # shows version information
  kubernetes-mcp-server --version
  
  # start STDIO server
  kubernetes-mcp-server
  
  # start a SSE server on port 8080
  kubernetes-mcp-server --port 8080
  
  # start a SSE server on port 8443 with a public HTTPS host of example.com
  kubernetes-mcp-server --port 8443 --sse-base-url https://example.com:8443

Flags:
      --config string           Path of the config file. Each profile has its set of defaults.
      --disable-destructive     If true, tools annotated with destructiveHint=true are disabled
  -h, --help                    help for kubernetes-mcp-server
      --http-port int           Start a streamable HTTP server on the specified port (DEPRECATED: Use --port instead)
      --kubeconfig string       Path to the kubeconfig file to use for authentication
      --kubeconfig-dir string   Directory containing multiple kubeconfig files for multi-cluster support
      --list-output string      Output format for resource list operations (one of: yaml, table). Defaults to table. (default "table")
      --log-level int           Set the log level (from 0 to 9)
      --port string             Start a streamable HTTP and SSE HTTP server on the specified port (e.g. 8080)
      --profile string          MCP profile to use (one of: full) (default "full")
      --read-only               If true, only tools annotated with readOnlyHint=true are exposed
      --sse-base-url string     SSE public base URL to use when sending the endpoint message (e.g. https://example.com)
      --sse-port int            Start a SSE server on the specified port (DEPRECATED: Use --port instead)
      --version                 Print version information and quit

=== RUN   TestAuthorizationURL/valid_authorization-url_with_https
--- PASS: TestAuthorizationURL (0.00s)
    --- PASS: TestAuthorizationURL/invalid_authorization-url_without_protocol (0.00s)
    --- PASS: TestAuthorizationURL/valid_authorization-url_with_https (0.00s)
FAIL
FAIL	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/kubernetes-mcp-server/cmd	0.192s
Version: 1.34.0
OS/Arch: darwin/arm64
Path: /Users/jdambly/Library/Application Support/io.kubebuilder.envtest/k8s/1.34.0-darwin-arm64
=== RUN   TestServer_initClusters
=== RUN   TestServer_initClusters/Multi-cluster_mode_enabled_returns_cluster_tools
=== RUN   TestServer_initClusters/Single_cluster_mode_returns_no_cluster_tools
--- PASS: TestServer_initClusters (0.00s)
    --- PASS: TestServer_initClusters/Multi-cluster_mode_enabled_returns_cluster_tools (0.00s)
    --- PASS: TestServer_initClusters/Single_cluster_mode_returns_no_cluster_tools (0.00s)
=== RUN   TestServer_isMultiClusterEnabled
=== RUN   TestServer_isMultiClusterEnabled/Single_cluster_mode
=== RUN   TestServer_isMultiClusterEnabled/Multi-cluster_mode
=== RUN   TestServer_isMultiClusterEnabled/Both_set_-_multi-cluster_takes_precedence
=== RUN   TestServer_isMultiClusterEnabled/Neither_set
--- PASS: TestServer_isMultiClusterEnabled (0.00s)
    --- PASS: TestServer_isMultiClusterEnabled/Single_cluster_mode (0.00s)
    --- PASS: TestServer_isMultiClusterEnabled/Multi-cluster_mode (0.00s)
    --- PASS: TestServer_isMultiClusterEnabled/Both_set_-_multi-cluster_takes_precedence (0.00s)
    --- PASS: TestServer_isMultiClusterEnabled/Neither_set (0.00s)
=== RUN   TestServer_clustersList
=== RUN   TestServer_clustersList/List_clusters_without_details
    clusters_test.go:282: Expected output to contain 'Available clusters'
=== RUN   TestServer_clustersList/List_clusters_with_details
    clusters_test.go:312: Expected detailed output to contain 'KubeConfig:'
--- FAIL: TestServer_clustersList (0.00s)
    --- FAIL: TestServer_clustersList/List_clusters_without_details (0.00s)
    --- FAIL: TestServer_clustersList/List_clusters_with_details (0.00s)
=== RUN   TestServer_clustersSwitch
=== RUN   TestServer_clustersSwitch/Switch_to_valid_cluster
    clusters_test.go:388: Expected success message
=== RUN   TestServer_clustersSwitch/Switch_without_cluster_name
=== RUN   TestServer_clustersSwitch/Switch_to_invalid_cluster
--- FAIL: TestServer_clustersSwitch (0.00s)
    --- FAIL: TestServer_clustersSwitch/Switch_to_valid_cluster (0.00s)
    --- PASS: TestServer_clustersSwitch/Switch_without_cluster_name (0.00s)
    --- PASS: TestServer_clustersSwitch/Switch_to_invalid_cluster (0.00s)
=== RUN   TestServer_clustersStatus
=== RUN   TestServer_clustersStatus/Status_for_all_clusters
    clusters_test.go:500: Expected status report header
=== RUN   TestServer_clustersStatus/Status_for_specific_cluster
    clusters_test.go:529: Expected specific cluster in status report
=== RUN   TestServer_clustersStatus/Status_for_nonexistent_cluster
--- FAIL: TestServer_clustersStatus (0.00s)
    --- FAIL: TestServer_clustersStatus/Status_for_all_clusters (0.00s)
    --- FAIL: TestServer_clustersStatus/Status_for_specific_cluster (0.00s)
    --- PASS: TestServer_clustersStatus/Status_for_nonexistent_cluster (0.00s)
=== RUN   TestServer_clustersRefresh
=== RUN   TestServer_clustersRefresh/Normal_refresh
    clusters_test.go:623: Expected refresh completion message
=== RUN   TestServer_clustersRefresh/Force_refresh
    clusters_test.go:652: Expected forced refresh message
--- FAIL: TestServer_clustersRefresh (0.00s)
    --- FAIL: TestServer_clustersRefresh/Normal_refresh (0.00s)
    --- FAIL: TestServer_clustersRefresh/Force_refresh (0.00s)
=== RUN   TestServer_getKubernetesWithMultiCluster
=== RUN   TestServer_getKubernetesWithMultiCluster/Multi-cluster_mode_enabled
I1020 10:58:58.991410   12878 multicluster.go:58] "Starting multi-cluster manager"
I1020 10:58:58.992176   12878 health.go:109] "Starting cluster health monitor" clusters=1
I1020 10:58:58.992183   12878 multicluster.go:85] "Multi-cluster manager started" clusters=1 active="cluster1"
E1020 10:58:58.996796   12878 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://test-cluster.example.com/api\": dial tcp: lookup test-cluster.example.com: no such host" logger="UnhandledError"
E1020 10:58:58.998908   12878 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://test-cluster.example.com/api\": dial tcp: lookup test-cluster.example.com: no such host" logger="UnhandledError"
I1020 10:58:58.998956   12878 multicluster.go:91] "Stopping multi-cluster manager"
I1020 10:58:58.998960   12878 health.go:130] "Stopping cluster health monitor"
I1020 10:58:58.998967   12878 multicluster.go:106] "Multi-cluster manager stopped"
=== RUN   TestServer_getKubernetesWithMultiCluster/Multi-cluster_mode_disabled
--- PASS: TestServer_getKubernetesWithMultiCluster (0.01s)
    --- PASS: TestServer_getKubernetesWithMultiCluster/Multi-cluster_mode_enabled (0.01s)
    --- PASS: TestServer_getKubernetesWithMultiCluster/Multi-cluster_mode_disabled (0.00s)
=== RUN   TestClusterToolsMetadata
--- PASS: TestClusterToolsMetadata (0.00s)
=== RUN   TestServer_clustersRefreshMultiCluster
--- PASS: TestServer_clustersRefreshMultiCluster (0.00s)
=== RUN   TestServer_checkClusterStatus
--- PASS: TestServer_checkClusterStatus (0.00s)
=== RUN   TestHumanizeDuration
=== RUN   TestHumanizeDuration/Seconds
=== RUN   TestHumanizeDuration/Minutes
=== RUN   TestHumanizeDuration/Hours
=== RUN   TestHumanizeDuration/Days
--- PASS: TestHumanizeDuration (0.00s)
    --- PASS: TestHumanizeDuration/Seconds (0.00s)
    --- PASS: TestHumanizeDuration/Minutes (0.00s)
    --- PASS: TestHumanizeDuration/Hours (0.00s)
    --- PASS: TestHumanizeDuration/Days (0.00s)
=== RUN   TestServer_formatClusterStatusTable
--- PASS: TestServer_formatClusterStatusTable (0.00s)
=== RUN   TestServer_formatDetailedClusterStatus
--- PASS: TestServer_formatDetailedClusterStatus (0.00s)
=== RUN   TestServer_executeOperation
=== RUN   TestServer_executeOperation/Returns_error_for_unsupported_operation
=== RUN   TestServer_executeOperation/Recognizes_all_supported_operations
    clusters_test.go:1234: Checking operation: pods_delete
    clusters_test.go:1234: Checking operation: pods_top
    clusters_test.go:1234: Checking operation: pods_list_in_namespace
    clusters_test.go:1234: Checking operation: pods_get
    clusters_test.go:1234: Checking operation: pods_log
    clusters_test.go:1234: Checking operation: pods_run
    clusters_test.go:1234: Checking operation: helm_install
    clusters_test.go:1234: Checking operation: resources_list
    clusters_test.go:1234: Checking operation: resources_create_or_update
    clusters_test.go:1234: Checking operation: helm_list
    clusters_test.go:1234: Checking operation: pods_list
    clusters_test.go:1234: Checking operation: namespaces_list
    clusters_test.go:1234: Checking operation: events_list
    clusters_test.go:1234: Checking operation: helm_uninstall
    clusters_test.go:1234: Checking operation: resources_get
    clusters_test.go:1234: Checking operation: resources_delete
    clusters_test.go:1234: Checking operation: pods_exec
    clusters_test.go:1241: Verified 17 operations are defined in executeOperation switch statement
--- PASS: TestServer_executeOperation (0.00s)
    --- PASS: TestServer_executeOperation/Returns_error_for_unsupported_operation (0.00s)
    --- PASS: TestServer_executeOperation/Recognizes_all_supported_operations (0.00s)
=== RUN   TestConfigurationView
=== RUN   TestConfigurationView/configuration_view_returns_configuration
=== RUN   TestConfigurationView/configuration_view_has_yaml_content
=== RUN   TestConfigurationView/configuration_view_returns_current-context
=== RUN   TestConfigurationView/configuration_view_returns_context_info
=== RUN   TestConfigurationView/configuration_view_returns_cluster_info
=== RUN   TestConfigurationView/configuration_view_returns_auth_info
=== RUN   TestConfigurationView/configuration_view_with_minified=false_returns_configuration
=== RUN   TestConfigurationView/configuration_view_with_minified=false_has_yaml_content
=== RUN   TestConfigurationView/configuration_view_with_minified=false_returns_additional_context_info
=== RUN   TestConfigurationView/configuration_view_with_minified=false_returns_cluster_info
=== RUN   TestConfigurationView/configuration_view_with_minified=false_returns_auth_info
--- PASS: TestConfigurationView (0.01s)
    --- PASS: TestConfigurationView/configuration_view_returns_configuration (0.00s)
    --- PASS: TestConfigurationView/configuration_view_has_yaml_content (0.00s)
    --- PASS: TestConfigurationView/configuration_view_returns_current-context (0.00s)
    --- PASS: TestConfigurationView/configuration_view_returns_context_info (0.00s)
    --- PASS: TestConfigurationView/configuration_view_returns_cluster_info (0.00s)
    --- PASS: TestConfigurationView/configuration_view_returns_auth_info (0.00s)
    --- PASS: TestConfigurationView/configuration_view_with_minified=false_returns_configuration (0.00s)
    --- PASS: TestConfigurationView/configuration_view_with_minified=false_has_yaml_content (0.00s)
    --- PASS: TestConfigurationView/configuration_view_with_minified=false_returns_additional_context_info (0.00s)
    --- PASS: TestConfigurationView/configuration_view_with_minified=false_returns_cluster_info (0.00s)
    --- PASS: TestConfigurationView/configuration_view_with_minified=false_returns_auth_info (0.00s)
=== RUN   TestConfigurationViewInCluster
=== RUN   TestConfigurationViewInCluster/configuration_view_returns_configuration
=== RUN   TestConfigurationViewInCluster/configuration_view_has_yaml_content
=== RUN   TestConfigurationViewInCluster/configuration_view_returns_current-context
=== RUN   TestConfigurationViewInCluster/configuration_view_returns_context_info
=== RUN   TestConfigurationViewInCluster/configuration_view_returns_cluster_info
=== RUN   TestConfigurationViewInCluster/configuration_view_returns_auth_info
--- PASS: TestConfigurationViewInCluster (0.00s)
    --- PASS: TestConfigurationViewInCluster/configuration_view_returns_configuration (0.00s)
    --- PASS: TestConfigurationViewInCluster/configuration_view_has_yaml_content (0.00s)
    --- PASS: TestConfigurationViewInCluster/configuration_view_returns_current-context (0.00s)
    --- PASS: TestConfigurationViewInCluster/configuration_view_returns_context_info (0.00s)
    --- PASS: TestConfigurationViewInCluster/configuration_view_returns_cluster_info (0.00s)
    --- PASS: TestConfigurationViewInCluster/configuration_view_returns_auth_info (0.00s)
=== RUN   TestEventsList
=== RUN   TestEventsList/events_list_with_no_events_returns_OK
=== RUN   TestEventsList/events_list_with_events_returns_all_OK
=== RUN   TestEventsList/events_list_in_namespace_with_events_returns_from_namespace_OK
E1020 10:58:59.027375   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestEventsList (0.01s)
    --- PASS: TestEventsList/events_list_with_no_events_returns_OK (0.00s)
    --- PASS: TestEventsList/events_list_with_events_returns_all_OK (0.00s)
    --- PASS: TestEventsList/events_list_in_namespace_with_events_returns_from_namespace_OK (0.00s)
=== RUN   TestEventsListDenied
=== RUN   TestEventsListDenied/events_list_has_error
=== RUN   TestEventsListDenied/events_list_describes_denial
--- PASS: TestEventsListDenied (0.01s)
    --- PASS: TestEventsListDenied/events_list_has_error (0.00s)
    --- PASS: TestEventsListDenied/events_list_describes_denial (0.00s)
=== RUN   TestHelmInstall
2025/10/20 10:58:59 beginning wait for 0 resources with timeout of 5m0s
2025/10/20 10:58:59 wait for resources succeeded within 0s
=== RUN   TestHelmInstall/helm_install_with_local_chart_and_no_release_name,_returns_installed_chart
E1020 10:58:59.046854   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestHelmInstall (0.01s)
    --- PASS: TestHelmInstall/helm_install_with_local_chart_and_no_release_name,_returns_installed_chart (0.00s)
=== RUN   TestHelmInstallDenied
=== RUN   TestHelmInstallDenied/helm_install_has_error
=== RUN   TestHelmInstallDenied/helm_install_describes_denial
E1020 10:58:59.082908   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestHelmInstallDenied (0.04s)
    --- PASS: TestHelmInstallDenied/helm_install_has_error (0.00s)
    --- PASS: TestHelmInstallDenied/helm_install_describes_denial (0.00s)
=== RUN   TestHelmList
=== RUN   TestHelmList/helm_list_with_no_releases,_returns_not_found
=== RUN   TestHelmList/helm_list_with_deployed_release,_returns_release
=== RUN   TestHelmList/helm_list_with_deployed_release_in_other_namespaces,_returns_not_found
=== RUN   TestHelmList/helm_list_with_deployed_release_in_all_namespaces,_returns_release
E1020 10:58:59.097869   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestHelmList (0.01s)
    --- PASS: TestHelmList/helm_list_with_no_releases,_returns_not_found (0.00s)
    --- PASS: TestHelmList/helm_list_with_deployed_release,_returns_release (0.00s)
    --- PASS: TestHelmList/helm_list_with_deployed_release_in_other_namespaces,_returns_not_found (0.00s)
    --- PASS: TestHelmList/helm_list_with_deployed_release_in_all_namespaces,_returns_release (0.00s)
=== RUN   TestHelmUninstall
=== RUN   TestHelmUninstall/helm_uninstall_with_no_releases,_returns_not_found
2025/10/20 10:58:59 uninstall: Deleting existent-release-to-uninstall
2025/10/20 10:58:59 uninstall: Failed to store updated release: update: failed to update: Secret "sh.helm.release.v1.existent-release-to-uninstall.v0" is invalid: type: Invalid value: "helm.sh/release.v1": field is immutable
2025/10/20 10:58:59 beginning wait for 0 resources to be deleted with timeout of 5m0s
2025/10/20 10:58:59 purge requested for existent-release-to-uninstall
=== RUN   TestHelmUninstall/helm_uninstall_with_deployed_release,_returns_uninstalled
E1020 10:58:59.113146   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestHelmUninstall (0.02s)
    --- PASS: TestHelmUninstall/helm_uninstall_with_no_releases,_returns_not_found (0.00s)
    --- PASS: TestHelmUninstall/helm_uninstall_with_deployed_release,_returns_uninstalled (0.00s)
=== RUN   TestHelmUninstallDenied
2025/10/20 10:58:59 uninstall: Deleting existent-release-to-uninstall
2025/10/20 10:58:59 uninstall: Failed to store updated release: update: failed to update: Secret "sh.helm.release.v1.existent-release-to-uninstall.v0" is invalid: type: Invalid value: "helm.sh/release.v1": field is immutable
2025/10/20 10:58:59 uninstall: Failed to delete release: [unable to build kubernetes objects for delete: unable to recognize "": resource not allowed: /v1, Kind=Secret]
=== RUN   TestHelmUninstallDenied/helm_uninstall_has_error
--- PASS: TestHelmUninstallDenied (0.01s)
    --- PASS: TestHelmUninstallDenied/helm_uninstall_has_error (0.00s)
E1020 10:58:59.123503   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
=== RUN   TestWatchKubeConfig
=== RUN   TestWatchKubeConfig/WatchKubeConfig_notifies_tools_change
E1020 10:58:59.228398   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestWatchKubeConfig (0.10s)
    --- PASS: TestWatchKubeConfig/WatchKubeConfig_notifies_tools_change (0.00s)
=== RUN   TestSseHeaders
=== RUN   TestSseHeaders/DiscoveryClient_propagates_headers_to_Kube_API
=== RUN   TestSseHeaders/DynamicClient_propagates_headers_to_Kube_API
=== RUN   TestSseHeaders/kubernetes.Interface_propagates_headers_to_Kube_API
--- PASS: TestSseHeaders (0.01s)
    --- PASS: TestSseHeaders/DiscoveryClient_propagates_headers_to_Kube_API (0.00s)
    --- PASS: TestSseHeaders/DynamicClient_propagates_headers_to_Kube_API (0.00s)
    --- PASS: TestSseHeaders/kubernetes.Interface_propagates_headers_to_Kube_API (0.00s)
=== RUN   TestUnrestricted
=== RUN   TestUnrestricted/ListTools_returns_tools
=== RUN   TestUnrestricted/Destructive_tools_ARE_NOT_read_only
--- PASS: TestUnrestricted (0.00s)
    --- PASS: TestUnrestricted/ListTools_returns_tools (0.00s)
    --- PASS: TestUnrestricted/Destructive_tools_ARE_NOT_read_only (0.00s)
=== RUN   TestReadOnly
=== RUN   TestReadOnly/ListTools_returns_tools
=== RUN   TestReadOnly/ListTools_returns_only_read-only_tools
--- PASS: TestReadOnly (0.00s)
    --- PASS: TestReadOnly/ListTools_returns_tools (0.00s)
    --- PASS: TestReadOnly/ListTools_returns_only_read-only_tools (0.00s)
=== RUN   TestDisableDestructive
=== RUN   TestDisableDestructive/ListTools_returns_tools
=== RUN   TestDisableDestructive/ListTools_does_not_return_destructive_tools
--- PASS: TestDisableDestructive (0.00s)
    --- PASS: TestDisableDestructive/ListTools_returns_tools (0.00s)
    --- PASS: TestDisableDestructive/ListTools_does_not_return_destructive_tools (0.00s)
=== RUN   TestEnabledTools
=== RUN   TestEnabledTools/ListTools_returns_tools
=== RUN   TestEnabledTools/ListTools_returns_only_explicitly_enabled_tools
--- PASS: TestEnabledTools (0.00s)
    --- PASS: TestEnabledTools/ListTools_returns_tools (0.00s)
    --- PASS: TestEnabledTools/ListTools_returns_only_explicitly_enabled_tools (0.00s)
=== RUN   TestDisabledTools
=== RUN   TestDisabledTools/ListTools_returns_tools
=== RUN   TestDisabledTools/ListTools_does_not_return_disabled_tools
--- PASS: TestDisabledTools (0.00s)
    --- PASS: TestDisabledTools/ListTools_returns_tools (0.00s)
    --- PASS: TestDisabledTools/ListTools_does_not_return_disabled_tools (0.00s)
=== RUN   TestToolCallLogging
=== RUN   TestToolCallLogging/Logs_tool_name
=== RUN   TestToolCallLogging/Logs_tool_call_arguments
=== RUN   TestToolCallLogging/Logs_tool_call_headers
=== RUN   TestToolCallLogging/Does_not_log_sensitive_headers
=== RUN   TestToolCallLogging/Does_not_log_sensitive_header_values
--- PASS: TestToolCallLogging (0.01s)
    --- PASS: TestToolCallLogging/Logs_tool_name (0.00s)
    --- PASS: TestToolCallLogging/Logs_tool_call_arguments (0.00s)
    --- PASS: TestToolCallLogging/Logs_tool_call_headers (0.00s)
    --- PASS: TestToolCallLogging/Does_not_log_sensitive_headers (0.00s)
    --- PASS: TestToolCallLogging/Does_not_log_sensitive_header_values (0.00s)
=== RUN   TestNamespacesList
=== RUN   TestNamespacesList/namespaces_list_returns_namespace_list
=== RUN   TestNamespacesList/namespaces_list_has_yaml_content
=== RUN   TestNamespacesList/namespaces_list_returns_at_least_3_items
E1020 10:58:59.268483   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestNamespacesList (0.01s)
    --- PASS: TestNamespacesList/namespaces_list_returns_namespace_list (0.00s)
    --- PASS: TestNamespacesList/namespaces_list_has_yaml_content (0.00s)
    --- PASS: TestNamespacesList/namespaces_list_returns_at_least_3_items (0.00s)
=== RUN   TestNamespacesListDenied
=== RUN   TestNamespacesListDenied/namespaces_list_has_error
=== RUN   TestNamespacesListDenied/namespaces_list_describes_denial
--- PASS: TestNamespacesListDenied (0.01s)
    --- PASS: TestNamespacesListDenied/namespaces_list_has_error (0.00s)
    --- PASS: TestNamespacesListDenied/namespaces_list_describes_denial (0.00s)
=== RUN   TestNamespacesListAsTable
=== RUN   TestNamespacesListAsTable/namespaces_list_returns_namespace_list
=== RUN   TestNamespacesListAsTable/namespaces_list_returns_column_headers
=== RUN   TestNamespacesListAsTable/namespaces_list_returns_formatted_row_for_ns-1
=== RUN   TestNamespacesListAsTable/namespaces_list_returns_formatted_row_for_ns-2
E1020 10:58:59.281726   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestNamespacesListAsTable (0.01s)
    --- PASS: TestNamespacesListAsTable/namespaces_list_returns_namespace_list (0.00s)
    --- PASS: TestNamespacesListAsTable/namespaces_list_returns_column_headers (0.00s)
    --- PASS: TestNamespacesListAsTable/namespaces_list_returns_formatted_row_for_ns-1 (0.00s)
    --- PASS: TestNamespacesListAsTable/namespaces_list_returns_formatted_row_for_ns-2 (0.00s)
=== RUN   TestProjectsListInOpenShift
=== RUN   TestProjectsListInOpenShift/projects_list_returns_project_list
=== RUN   TestProjectsListInOpenShift/projects_list_has_yaml_content
=== RUN   TestProjectsListInOpenShift/projects_list_returns_at_least_1_items
--- PASS: TestProjectsListInOpenShift (2.13s)
    --- PASS: TestProjectsListInOpenShift/projects_list_returns_project_list (0.00s)
    --- PASS: TestProjectsListInOpenShift/projects_list_has_yaml_content (0.00s)
    --- PASS: TestProjectsListInOpenShift/projects_list_returns_at_least_1_items (0.00s)
=== RUN   TestProjectsListInOpenShiftDenied
=== RUN   TestProjectsListInOpenShiftDenied/projects_list_has_error
=== RUN   TestProjectsListInOpenShiftDenied/projects_list_describes_denial
E1020 10:59:01.536017   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestProjectsListInOpenShiftDenied (0.13s)
    --- PASS: TestProjectsListInOpenShiftDenied/projects_list_has_error (0.00s)
    --- PASS: TestProjectsListInOpenShiftDenied/projects_list_describes_denial (0.00s)
=== RUN   TestPodsExec
=== RUN   TestPodsExec/pods_exec_with_name_and_nil_namespace_returns_command_output
=== RUN   TestPodsExec/pods_exec_with_name_and_namespace_returns_command_output
=== RUN   TestPodsExec/pods_exec_with_name,_namespace,_and_container_returns_command_output
E1020 10:59:01.552306   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsExec (0.02s)
    --- PASS: TestPodsExec/pods_exec_with_name_and_nil_namespace_returns_command_output (0.00s)
    --- PASS: TestPodsExec/pods_exec_with_name_and_namespace_returns_command_output (0.00s)
    --- PASS: TestPodsExec/pods_exec_with_name,_namespace,_and_container_returns_command_output (0.00s)
=== RUN   TestPodsExecDenied
=== RUN   TestPodsExecDenied/pods_exec_has_error
=== RUN   TestPodsExecDenied/pods_exec_describes_denial
E1020 10:59:01.557864   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsExecDenied (0.01s)
    --- PASS: TestPodsExecDenied/pods_exec_has_error (0.00s)
    --- PASS: TestPodsExecDenied/pods_exec_describes_denial (0.00s)
=== RUN   TestPodsListInAllNamespaces
=== RUN   TestPodsListInAllNamespaces/pods_list_returns_pods_list
=== RUN   TestPodsListInAllNamespaces/pods_list_has_yaml_content
=== RUN   TestPodsListInAllNamespaces/pods_list_returns_3_items
=== RUN   TestPodsListInAllNamespaces/pods_list_returns_pod_in_ns-1
=== RUN   TestPodsListInAllNamespaces/pods_list_returns_pod_in_ns-2
=== RUN   TestPodsListInAllNamespaces/pods_list_omits_managed_fields
E1020 10:59:01.567952   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsListInAllNamespaces (0.01s)
    --- PASS: TestPodsListInAllNamespaces/pods_list_returns_pods_list (0.00s)
    --- PASS: TestPodsListInAllNamespaces/pods_list_has_yaml_content (0.00s)
    --- PASS: TestPodsListInAllNamespaces/pods_list_returns_3_items (0.00s)
    --- PASS: TestPodsListInAllNamespaces/pods_list_returns_pod_in_ns-1 (0.00s)
    --- PASS: TestPodsListInAllNamespaces/pods_list_returns_pod_in_ns-2 (0.00s)
    --- PASS: TestPodsListInAllNamespaces/pods_list_omits_managed_fields (0.00s)
=== RUN   TestPodsListInAllNamespacesUnauthorized
=== RUN   TestPodsListInAllNamespacesUnauthorized/pods_list_returns_pods_list_for_default_namespace_only
=== RUN   TestPodsListInAllNamespacesUnauthorized/pods_list_has_yaml_content
=== RUN   TestPodsListInAllNamespacesUnauthorized/pods_list_returns_1_items
=== RUN   TestPodsListInAllNamespacesUnauthorized/pods_list_returns_pod_in_default
E1020 10:59:01.669112   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsListInAllNamespacesUnauthorized (0.10s)
    --- PASS: TestPodsListInAllNamespacesUnauthorized/pods_list_returns_pods_list_for_default_namespace_only (0.00s)
    --- PASS: TestPodsListInAllNamespacesUnauthorized/pods_list_has_yaml_content (0.00s)
    --- PASS: TestPodsListInAllNamespacesUnauthorized/pods_list_returns_1_items (0.00s)
    --- PASS: TestPodsListInAllNamespacesUnauthorized/pods_list_returns_pod_in_default (0.00s)
=== RUN   TestPodsListInNamespace
=== RUN   TestPodsListInNamespace/pods_list_in_namespace_with_nil_namespace_returns_error
=== RUN   TestPodsListInNamespace/pods_list_in_namespace_returns_pods_list
=== RUN   TestPodsListInNamespace/pods_list_in_namespace_has_yaml_content
=== RUN   TestPodsListInNamespace/pods_list_in_namespace_returns_1_items
=== RUN   TestPodsListInNamespace/pods_list_in_namespace_returns_pod_in_ns-1
=== RUN   TestPodsListInNamespace/pods_list_in_namespace_omits_managed_fields
E1020 10:59:01.766724   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsListInNamespace (0.10s)
    --- PASS: TestPodsListInNamespace/pods_list_in_namespace_with_nil_namespace_returns_error (0.00s)
    --- PASS: TestPodsListInNamespace/pods_list_in_namespace_returns_pods_list (0.00s)
    --- PASS: TestPodsListInNamespace/pods_list_in_namespace_has_yaml_content (0.00s)
    --- PASS: TestPodsListInNamespace/pods_list_in_namespace_returns_1_items (0.00s)
    --- PASS: TestPodsListInNamespace/pods_list_in_namespace_returns_pod_in_ns-1 (0.00s)
    --- PASS: TestPodsListInNamespace/pods_list_in_namespace_omits_managed_fields (0.00s)
=== RUN   TestPodsListDenied
=== RUN   TestPodsListDenied/pods_list_has_error
=== RUN   TestPodsListDenied/pods_list_describes_denial
=== RUN   TestPodsListDenied/pods_list_in_namespace_has_error
=== RUN   TestPodsListDenied/pods_list_in_namespace_describes_denial
2025/10/20 10:59:01 ERROR: SSE stream error: context canceled
--- PASS: TestPodsListDenied (0.01s)
    --- PASS: TestPodsListDenied/pods_list_has_error (0.00s)
    --- PASS: TestPodsListDenied/pods_list_describes_denial (0.00s)
    --- PASS: TestPodsListDenied/pods_list_in_namespace_has_error (0.00s)
    --- PASS: TestPodsListDenied/pods_list_in_namespace_describes_denial (0.00s)
=== RUN   TestPodsListAsTable
=== RUN   TestPodsListAsTable/pods_list_returns_pods_list
=== RUN   TestPodsListAsTable/pods_list_returns_table_with_1_header_and_3_rows
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_column_headers
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_formatted_row_for_a-pod-in-ns-1
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_formatted_row_for_a-pod-in-default
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_pods_list
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_table_with_1_header_and_1_row
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_column_headers#01
=== RUN   TestPodsListAsTable/pods_list_in_namespace_returns_formatted_row
--- PASS: TestPodsListAsTable (0.01s)
    --- PASS: TestPodsListAsTable/pods_list_returns_pods_list (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_returns_table_with_1_header_and_3_rows (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_column_headers (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_formatted_row_for_a-pod-in-ns-1 (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_formatted_row_for_a-pod-in-default (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_pods_list (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_table_with_1_header_and_1_row (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_column_headers#01 (0.00s)
    --- PASS: TestPodsListAsTable/pods_list_in_namespace_returns_formatted_row (0.00s)
E1020 10:59:01.785950   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
=== RUN   TestPodsGet
=== RUN   TestPodsGet/pods_get_with_nil_name_returns_error
=== RUN   TestPodsGet/pods_get_with_not_found_name_returns_error
=== RUN   TestPodsGet/pods_get_with_name_and_nil_namespace_returns_pod
=== RUN   TestPodsGet/pods_get_with_name_and_nil_namespace_has_yaml_content
=== RUN   TestPodsGet/pods_get_with_name_and_nil_namespace_returns_pod_in_default
=== RUN   TestPodsGet/pods_get_with_name_and_nil_namespace_omits_managed_fields
=== RUN   TestPodsGet/pods_get_with_name_and_namespace_returns_pod
=== RUN   TestPodsGet/pods_get_with_name_and_namespace_has_yaml_content
=== RUN   TestPodsGet/pods_get_with_name_and_namespace_returns_pod_in_ns-1
E1020 10:59:01.796478   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsGet (0.01s)
    --- PASS: TestPodsGet/pods_get_with_nil_name_returns_error (0.00s)
    --- PASS: TestPodsGet/pods_get_with_not_found_name_returns_error (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_nil_namespace_returns_pod (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_nil_namespace_has_yaml_content (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_nil_namespace_returns_pod_in_default (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_nil_namespace_omits_managed_fields (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_namespace_returns_pod (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_namespace_has_yaml_content (0.00s)
    --- PASS: TestPodsGet/pods_get_with_name_and_namespace_returns_pod_in_ns-1 (0.00s)
=== RUN   TestPodsGetDenied
=== RUN   TestPodsGetDenied/pods_get_has_error
=== RUN   TestPodsGetDenied/pods_get_describes_denial
--- PASS: TestPodsGetDenied (0.01s)
    --- PASS: TestPodsGetDenied/pods_get_has_error (0.00s)
    --- PASS: TestPodsGetDenied/pods_get_describes_denial (0.00s)
=== RUN   TestPodsDelete
=== RUN   TestPodsDelete/pods_delete_with_nil_name_returns_error
=== RUN   TestPodsDelete/pods_delete_with_not_found_name_returns_error
=== RUN   TestPodsDelete/pods_delete_with_name_and_nil_namespace_returns_success
=== RUN   TestPodsDelete/pods_delete_with_name_and_nil_namespace_deletes_Pod
=== RUN   TestPodsDelete/pods_delete_with_name_and_namespace_returns_success
=== RUN   TestPodsDelete/pods_delete_with_name_and_namespace_deletes_Pod
=== RUN   TestPodsDelete/pods_delete_with_managed_pod_returns_success
=== RUN   TestPodsDelete/pods_delete_with_managed_pod_deletes_Pod_and_Service
E1020 10:59:01.829036   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsDelete (0.03s)
    --- PASS: TestPodsDelete/pods_delete_with_nil_name_returns_error (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_not_found_name_returns_error (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_name_and_nil_namespace_returns_success (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_name_and_nil_namespace_deletes_Pod (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_name_and_namespace_returns_success (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_name_and_namespace_deletes_Pod (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_managed_pod_returns_success (0.00s)
    --- PASS: TestPodsDelete/pods_delete_with_managed_pod_deletes_Pod_and_Service (0.00s)
=== RUN   TestPodsDeleteDenied
=== RUN   TestPodsDeleteDenied/pods_delete_has_error
=== RUN   TestPodsDeleteDenied/pods_delete_describes_denial
--- PASS: TestPodsDeleteDenied (0.01s)
    --- PASS: TestPodsDeleteDenied/pods_delete_has_error (0.00s)
    --- PASS: TestPodsDeleteDenied/pods_delete_describes_denial (0.00s)
=== RUN   TestPodsDeleteInOpenShift
=== RUN   TestPodsDeleteInOpenShift/pods_delete_with_managed_pod_in_OpenShift_returns_success
=== RUN   TestPodsDeleteInOpenShift/pods_delete_with_managed_pod_in_OpenShift_deletes_Pod_and_Route
--- PASS: TestPodsDeleteInOpenShift (2.13s)
    --- PASS: TestPodsDeleteInOpenShift/pods_delete_with_managed_pod_in_OpenShift_returns_success (0.00s)
    --- PASS: TestPodsDeleteInOpenShift/pods_delete_with_managed_pod_in_OpenShift_deletes_Pod_and_Route (0.00s)
=== RUN   TestPodsLog
=== RUN   TestPodsLog/pods_log_with_nil_name_returns_error
=== RUN   TestPodsLog/pods_log_with_not_found_name_returns_error
=== RUN   TestPodsLog/pods_log_with_name_and_nil_namespace_returns_pod_log
=== RUN   TestPodsLog/pods_log_with_name_and_namespace_returns_pod_log
=== RUN   TestPodsLog/pods_log_with_name,_container_and_namespace_returns_pod_log
=== RUN   TestPodsLog/pods_log_with_non_existing_container_returns_error
--- PASS: TestPodsLog (0.01s)
    --- PASS: TestPodsLog/pods_log_with_nil_name_returns_error (0.00s)
    --- PASS: TestPodsLog/pods_log_with_not_found_name_returns_error (0.00s)
    --- PASS: TestPodsLog/pods_log_with_name_and_nil_namespace_returns_pod_log (0.00s)
    --- PASS: TestPodsLog/pods_log_with_name_and_namespace_returns_pod_log (0.00s)
    --- PASS: TestPodsLog/pods_log_with_name,_container_and_namespace_returns_pod_log (0.00s)
    --- PASS: TestPodsLog/pods_log_with_non_existing_container_returns_error (0.00s)
E1020 10:59:03.980482   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
=== RUN   TestPodsLogDenied
=== RUN   TestPodsLogDenied/pods_log_has_error
=== RUN   TestPodsLogDenied/pods_log_describes_denial
--- PASS: TestPodsLogDenied (0.01s)
    --- PASS: TestPodsLogDenied/pods_log_has_error (0.00s)
    --- PASS: TestPodsLogDenied/pods_log_describes_denial (0.00s)
=== RUN   TestPodsRun
=== RUN   TestPodsRun/pods_run_with_nil_image_returns_error
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_runs_pod
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_has_yaml_content
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_returns_1_item_(Pod)
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_in_default
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_with_random_name
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_with_labels
=== RUN   TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_with_nginx_container
=== RUN   TestPodsRun/pods_run_with_image,_namespace,_and_port_runs_pod
=== RUN   TestPodsRun/pods_run_with_image,_namespace,_and_port_has_yaml_content
=== RUN   TestPodsRun/pods_run_with_image,_namespace,_and_port_returns_2_items_(Pod_+_Service)
=== RUN   TestPodsRun/pods_run_with_image,_namespace,_and_port_returns_pod_with_port
=== RUN   TestPodsRun/pods_run_with_image,_namespace,_and_port_returns_service_with_port_and_selector
E1020 10:59:04.005152   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsRun (0.02s)
    --- PASS: TestPodsRun/pods_run_with_nil_image_returns_error (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_runs_pod (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_has_yaml_content (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_returns_1_item_(Pod) (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_in_default (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_with_random_name (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_with_labels (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image_and_nil_namespace_returns_pod_with_nginx_container (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image,_namespace,_and_port_runs_pod (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image,_namespace,_and_port_has_yaml_content (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image,_namespace,_and_port_returns_2_items_(Pod_+_Service) (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image,_namespace,_and_port_returns_pod_with_port (0.00s)
    --- PASS: TestPodsRun/pods_run_with_image,_namespace,_and_port_returns_service_with_port_and_selector (0.00s)
=== RUN   TestPodsRunDenied
=== RUN   TestPodsRunDenied/pods_run_has_error
=== RUN   TestPodsRunDenied/pods_run_describes_denial
2025/10/20 10:59:04 ERROR: SSE stream error: context canceled
--- PASS: TestPodsRunDenied (0.01s)
    --- PASS: TestPodsRunDenied/pods_run_has_error (0.00s)
    --- PASS: TestPodsRunDenied/pods_run_describes_denial (0.00s)
=== RUN   TestPodsRunInOpenShift
E1020 10:59:04.015251   12878 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://127.0.0.1:6443/api\": dial tcp 127.0.0.1:6443: connect: connection refused" logger="UnhandledError"
E1020 10:59:04.015428   12878 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://127.0.0.1:6443/api\": dial tcp 127.0.0.1:6443: connect: connection refused" logger="UnhandledError"
=== RUN   TestPodsRunInOpenShift/pods_run_with_image,_namespace,_and_port_returns_route_with_port
--- PASS: TestPodsRunInOpenShift (0.13s)
    --- PASS: TestPodsRunInOpenShift/pods_run_with_image,_namespace,_and_port_returns_route_with_port (0.01s)
=== RUN   TestPodsListWithLabelSelector
=== RUN   TestPodsListWithLabelSelector/pods_list_with_label_selector_returns_filtered_pods
=== RUN   TestPodsListWithLabelSelector/pods_list_in_namespace_with_label_selector_returns_filtered_pods
=== RUN   TestPodsListWithLabelSelector/pods_list_with_multiple_label_selectors_returns_filtered_pods
E1020 10:59:04.156592   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsListWithLabelSelector (0.02s)
    --- PASS: TestPodsListWithLabelSelector/pods_list_with_label_selector_returns_filtered_pods (0.00s)
    --- PASS: TestPodsListWithLabelSelector/pods_list_in_namespace_with_label_selector_returns_filtered_pods (0.00s)
    --- PASS: TestPodsListWithLabelSelector/pods_list_with_multiple_label_selectors_returns_filtered_pods (0.00s)
=== RUN   TestPodsTopMetricsUnavailable
=== RUN   TestPodsTopMetricsUnavailable/pods_top_with_metrics_API_not_available
E1020 10:59:04.163639   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsTopMetricsUnavailable (0.01s)
    --- PASS: TestPodsTopMetricsUnavailable/pods_top_with_metrics_API_not_available (0.00s)
=== RUN   TestPodsTopMetricsAvailable
Request received: GET /api
Request received: GET /apis
Request received: GET /apis/metrics.k8s.io/v1beta1
Request received: GET /apis/metrics.k8s.io/v1beta1/pods
Request received: GET /api
=== RUN   TestPodsTopMetricsAvailable/pods_top_defaults_returns_pod_metrics_from_all_namespaces
Request received: GET /apis
Request received: GET /apis/metrics.k8s.io/v1beta1
Request received: GET /apis/metrics.k8s.io/v1beta1/namespaces/default/pods
=== RUN   TestPodsTopMetricsAvailable/pods_top[allNamespaces=false]_returns_pod_metrics_from_configured_namespace
Request received: GET /apis/metrics.k8s.io/v1beta1/namespaces/ns-5/pods
=== RUN   TestPodsTopMetricsAvailable/pods_top[namespace=ns-5]_returns_pod_metrics_from_provided_namespace
Request received: GET /apis/metrics.k8s.io/v1beta1/namespaces/ns-5/pods/pod-ns-5-5
=== RUN   TestPodsTopMetricsAvailable/pods_top[namespace=ns-5,name=pod-ns-5-5]_returns_pod_metrics_from_provided_namespace_and_name
Request received: GET /apis/metrics.k8s.io/v1beta1/pods
=== RUN   TestPodsTopMetricsAvailable/pods_top[label_selector=app=pod-ns-5-42]_returns_pod_metrics_from_pods_matching_selector
E1020 10:59:04.171481   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestPodsTopMetricsAvailable (0.01s)
    --- PASS: TestPodsTopMetricsAvailable/pods_top_defaults_returns_pod_metrics_from_all_namespaces (0.00s)
    --- PASS: TestPodsTopMetricsAvailable/pods_top[allNamespaces=false]_returns_pod_metrics_from_configured_namespace (0.00s)
    --- PASS: TestPodsTopMetricsAvailable/pods_top[namespace=ns-5]_returns_pod_metrics_from_provided_namespace (0.00s)
    --- PASS: TestPodsTopMetricsAvailable/pods_top[namespace=ns-5,name=pod-ns-5-5]_returns_pod_metrics_from_provided_namespace_and_name (0.00s)
    --- PASS: TestPodsTopMetricsAvailable/pods_top[label_selector=app=pod-ns-5-42]_returns_pod_metrics_from_pods_matching_selector (0.00s)
=== RUN   TestPodsTopDenied
=== RUN   TestPodsTopDenied/pods_run_has_error
=== RUN   TestPodsTopDenied/pods_run_describes_denial
E1020 10:59:04.176802   12878 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://127.0.0.1:54557/api\": dial tcp 127.0.0.1:54557: connect: connection refused" logger="UnhandledError"
E1020 10:59:04.176928   12878 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"http://127.0.0.1:54557/api\": dial tcp 127.0.0.1:54557: connect: connection refused" logger="UnhandledError"
--- PASS: TestPodsTopDenied (0.01s)
    --- PASS: TestPodsTopDenied/pods_run_has_error (0.00s)
    --- PASS: TestPodsTopDenied/pods_run_describes_denial (0.00s)
=== RUN   TestFullProfileTools
=== RUN   TestFullProfileTools/ListTools_returns_tools
=== RUN   TestFullProfileTools/ListTools_has_configuration_view_tool
=== RUN   TestFullProfileTools/ListTools_has_events_list_tool
=== RUN   TestFullProfileTools/ListTools_has_helm_install_tool
=== RUN   TestFullProfileTools/ListTools_has_helm_list_tool
=== RUN   TestFullProfileTools/ListTools_has_helm_uninstall_tool
=== RUN   TestFullProfileTools/ListTools_has_namespaces_list_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_list_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_list_in_namespace_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_get_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_delete_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_top_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_log_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_run_tool
=== RUN   TestFullProfileTools/ListTools_has_pods_exec_tool
=== RUN   TestFullProfileTools/ListTools_has_resources_list_tool
=== RUN   TestFullProfileTools/ListTools_has_resources_get_tool
=== RUN   TestFullProfileTools/ListTools_has_resources_create_or_update_tool
=== RUN   TestFullProfileTools/ListTools_has_resources_delete_tool
--- PASS: TestFullProfileTools (0.00s)
    --- PASS: TestFullProfileTools/ListTools_returns_tools (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_configuration_view_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_events_list_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_helm_install_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_helm_list_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_helm_uninstall_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_namespaces_list_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_list_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_list_in_namespace_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_get_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_delete_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_top_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_log_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_run_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_pods_exec_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_resources_list_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_resources_get_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_resources_create_or_update_tool (0.00s)
    --- PASS: TestFullProfileTools/ListTools_has_resources_delete_tool (0.00s)
=== RUN   TestFullProfileToolsInOpenShift
=== RUN   TestFullProfileToolsInOpenShift/ListTools_returns_tools
=== RUN   TestFullProfileToolsInOpenShift/ListTools_contains_projects_list_tool
=== RUN   TestFullProfileToolsInOpenShift/ListTools_has_resources_list_tool_with_OpenShift_hint
--- PASS: TestFullProfileToolsInOpenShift (0.13s)
    --- PASS: TestFullProfileToolsInOpenShift/ListTools_returns_tools (0.00s)
    --- PASS: TestFullProfileToolsInOpenShift/ListTools_contains_projects_list_tool (0.00s)
    --- PASS: TestFullProfileToolsInOpenShift/ListTools_has_resources_list_tool_with_OpenShift_hint (0.00s)
=== RUN   TestResourcesList
=== RUN   TestResourcesList/resources_list_with_missing_apiVersion_returns_error
=== RUN   TestResourcesList/resources_list_with_missing_kind_returns_error
=== RUN   TestResourcesList/resources_list_with_invalid_apiVersion_returns_error
=== RUN   TestResourcesList/resources_list_with_nonexistent_apiVersion_returns_error
=== RUN   TestResourcesList/resources_list_returns_namespaces
=== RUN   TestResourcesList/resources_list_has_yaml_content
=== RUN   TestResourcesList/resources_list_returns_more_than_2_items
=== RUN   TestResourcesList/resources_list_with_label_selector_returns_filtered_pods
--- PASS: TestResourcesList (0.01s)
    --- PASS: TestResourcesList/resources_list_with_missing_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesList/resources_list_with_missing_kind_returns_error (0.00s)
    --- PASS: TestResourcesList/resources_list_with_invalid_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesList/resources_list_with_nonexistent_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesList/resources_list_returns_namespaces (0.00s)
    --- PASS: TestResourcesList/resources_list_has_yaml_content (0.00s)
    --- PASS: TestResourcesList/resources_list_returns_more_than_2_items (0.00s)
    --- PASS: TestResourcesList/resources_list_with_label_selector_returns_filtered_pods (0.00s)
E1020 10:59:04.321645   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
=== RUN   TestResourcesListDenied
=== RUN   TestResourcesListDenied/resources_list_(denied_by_kind)_has_error
=== RUN   TestResourcesListDenied/resources_list_(denied_by_kind)_describes_denial
=== RUN   TestResourcesListDenied/resources_list_(denied_by_group)_has_error
=== RUN   TestResourcesListDenied/resources_list_(denied_by_group)_describes_denial
=== RUN   TestResourcesListDenied/resources_list_(not_denied)_returns_list
E1020 10:59:04.329816   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesListDenied (0.01s)
    --- PASS: TestResourcesListDenied/resources_list_(denied_by_kind)_has_error (0.00s)
    --- PASS: TestResourcesListDenied/resources_list_(denied_by_kind)_describes_denial (0.00s)
    --- PASS: TestResourcesListDenied/resources_list_(denied_by_group)_has_error (0.00s)
    --- PASS: TestResourcesListDenied/resources_list_(denied_by_group)_describes_denial (0.00s)
    --- PASS: TestResourcesListDenied/resources_list_(not_denied)_returns_list (0.00s)
=== RUN   TestResourcesListAsTable
=== RUN   TestResourcesListAsTable/resources_list_returns_ConfigMap_list
=== RUN   TestResourcesListAsTable/resources_list_returns_column_headers_for_ConfigMap_list
=== RUN   TestResourcesListAsTable/resources_list_returns_formatted_row_for_a-configmap-to-list-as-table
=== RUN   TestResourcesListAsTable/resources_list_returns_Route_list
=== RUN   TestResourcesListAsTable/resources_list_returns_column_headers_for_Route_list
=== RUN   TestResourcesListAsTable/resources_list_returns_formatted_row_for_an-openshift-route-to-list-as-table
E1020 10:59:06.462384   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesListAsTable (2.13s)
    --- PASS: TestResourcesListAsTable/resources_list_returns_ConfigMap_list (0.00s)
    --- PASS: TestResourcesListAsTable/resources_list_returns_column_headers_for_ConfigMap_list (0.00s)
    --- PASS: TestResourcesListAsTable/resources_list_returns_formatted_row_for_a-configmap-to-list-as-table (0.00s)
    --- PASS: TestResourcesListAsTable/resources_list_returns_Route_list (0.00s)
    --- PASS: TestResourcesListAsTable/resources_list_returns_column_headers_for_Route_list (0.00s)
    --- PASS: TestResourcesListAsTable/resources_list_returns_formatted_row_for_an-openshift-route-to-list-as-table (0.00s)
=== RUN   TestResourcesGet
=== RUN   TestResourcesGet/resources_get_with_missing_apiVersion_returns_error
=== RUN   TestResourcesGet/resources_get_with_missing_kind_returns_error
=== RUN   TestResourcesGet/resources_get_with_invalid_apiVersion_returns_error
=== RUN   TestResourcesGet/resources_get_with_nonexistent_apiVersion_returns_error
=== RUN   TestResourcesGet/resources_get_with_missing_name_returns_error
=== RUN   TestResourcesGet/resources_get_returns_namespace
=== RUN   TestResourcesGet/resources_get_has_yaml_content
=== RUN   TestResourcesGet/resources_get_returns_default_namespace
E1020 10:59:06.471600   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesGet (0.01s)
    --- PASS: TestResourcesGet/resources_get_with_missing_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesGet/resources_get_with_missing_kind_returns_error (0.00s)
    --- PASS: TestResourcesGet/resources_get_with_invalid_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesGet/resources_get_with_nonexistent_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesGet/resources_get_with_missing_name_returns_error (0.00s)
    --- PASS: TestResourcesGet/resources_get_returns_namespace (0.00s)
    --- PASS: TestResourcesGet/resources_get_has_yaml_content (0.00s)
    --- PASS: TestResourcesGet/resources_get_returns_default_namespace (0.00s)
=== RUN   TestResourcesGetDenied
=== RUN   TestResourcesGetDenied/resources_get_(denied_by_kind)_has_error
=== RUN   TestResourcesGetDenied/resources_get_(denied_by_kind)_describes_denial
=== RUN   TestResourcesGetDenied/resources_get_(denied_by_group)_has_error
=== RUN   TestResourcesGetDenied/resources_get_(denied_by_group)_describes_denial
=== RUN   TestResourcesGetDenied/resources_get_(not_denied)_returns_resource
E1020 10:59:06.480926   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesGetDenied (0.01s)
    --- PASS: TestResourcesGetDenied/resources_get_(denied_by_kind)_has_error (0.00s)
    --- PASS: TestResourcesGetDenied/resources_get_(denied_by_kind)_describes_denial (0.00s)
    --- PASS: TestResourcesGetDenied/resources_get_(denied_by_group)_has_error (0.00s)
    --- PASS: TestResourcesGetDenied/resources_get_(denied_by_group)_describes_denial (0.00s)
    --- PASS: TestResourcesGetDenied/resources_get_(not_denied)_returns_resource (0.00s)
=== RUN   TestResourcesCreateOrUpdate
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_nil_resource_returns_error
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_empty_resource_returns_error
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_yaml_resource_returns_success
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_yaml_resource_returns_yaml_content
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_yaml_resource_creates_ConfigMap
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_returns_success
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_creates_config_map
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_cluster-scoped_json_resource_returns_success
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_cluster-scoped_json_resource_creates_custom_resource_definition
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_returns_success#01
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_creates_custom_resource
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_updates_custom_resource
=== RUN   TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_updates_custom_resource#01
E1020 10:59:06.506061   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesCreateOrUpdate (0.03s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_nil_resource_returns_error (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_empty_resource_returns_error (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_yaml_resource_returns_success (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_yaml_resource_returns_yaml_content (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_yaml_resource_creates_ConfigMap (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_returns_success (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_creates_config_map (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_cluster-scoped_json_resource_returns_success (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_cluster-scoped_json_resource_creates_custom_resource_definition (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_returns_success#01 (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_creates_custom_resource (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_updates_custom_resource (0.00s)
    --- PASS: TestResourcesCreateOrUpdate/resources_create_or_update_with_valid_namespaced_json_resource_updates_custom_resource#01 (0.00s)
=== RUN   TestResourcesCreateOrUpdateDenied
=== RUN   TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_kind)_has_error
=== RUN   TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_kind)_describes_denial
=== RUN   TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_group)_has_error
=== RUN   TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_group)_describes_denial
=== RUN   TestResourcesCreateOrUpdateDenied/resources_create_or_update_(not_denied)_creates_or_updates_resource
E1020 10:59:06.514262   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesCreateOrUpdateDenied (0.01s)
    --- PASS: TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_kind)_has_error (0.00s)
    --- PASS: TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_kind)_describes_denial (0.00s)
    --- PASS: TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_group)_has_error (0.00s)
    --- PASS: TestResourcesCreateOrUpdateDenied/resources_create_or_update_(denied_by_group)_describes_denial (0.00s)
    --- PASS: TestResourcesCreateOrUpdateDenied/resources_create_or_update_(not_denied)_creates_or_updates_resource (0.00s)
=== RUN   TestResourcesDelete
=== RUN   TestResourcesDelete/resources_delete_with_missing_apiVersion_returns_error
=== RUN   TestResourcesDelete/resources_delete_with_missing_kind_returns_error
=== RUN   TestResourcesDelete/resources_delete_with_invalid_apiVersion_returns_error
=== RUN   TestResourcesDelete/resources_delete_with_nonexistent_apiVersion_returns_error
=== RUN   TestResourcesDelete/resources_delete_with_missing_name_returns_error
=== RUN   TestResourcesDelete/resources_delete_with_nonexistent_resource_returns_error
    resources_test.go:695: invalid error message, got failed to delete resource: Resource not found: configmaps "nonexistent-configmap" not found
        
        Tip: Check if the namespace exists and the resource name is correct.
=== RUN   TestResourcesDelete/resources_delete_with_valid_namespaced_resource_returns_success
=== RUN   TestResourcesDelete/resources_delete_with_valid_namespaced_resource_deletes_ConfigMap
=== RUN   TestResourcesDelete/resources_delete_with_valid_namespaced_resource_returns_success#01
=== RUN   TestResourcesDelete/resources_delete_with_valid_namespaced_resource_deletes_Namespace
E1020 10:59:06.526463   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- FAIL: TestResourcesDelete (0.01s)
    --- PASS: TestResourcesDelete/resources_delete_with_missing_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_missing_kind_returns_error (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_invalid_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_nonexistent_apiVersion_returns_error (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_missing_name_returns_error (0.00s)
    --- FAIL: TestResourcesDelete/resources_delete_with_nonexistent_resource_returns_error (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_valid_namespaced_resource_returns_success (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_valid_namespaced_resource_deletes_ConfigMap (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_valid_namespaced_resource_returns_success#01 (0.00s)
    --- PASS: TestResourcesDelete/resources_delete_with_valid_namespaced_resource_deletes_Namespace (0.00s)
=== RUN   TestResourcesDeleteDenied
=== RUN   TestResourcesDeleteDenied/resources_delete_(denied_by_kind)_has_error
=== RUN   TestResourcesDeleteDenied/resources_delete_(denied_by_kind)_describes_denial
=== RUN   TestResourcesDeleteDenied/resources_delete_(denied_by_group)_has_error
=== RUN   TestResourcesDeleteDenied/resources_delete_(denied_by_group)_describes_denial
=== RUN   TestResourcesDeleteDenied/resources_delete_(not_denied)_deletes_resource
E1020 10:59:06.535538   12878 mcp.go:208] "Failed to create single-cluster manager" err="invalid configuration: no configuration has been provided, try setting KUBERNETES_MASTER environment variable"
--- PASS: TestResourcesDeleteDenied (0.01s)
    --- PASS: TestResourcesDeleteDenied/resources_delete_(denied_by_kind)_has_error (0.00s)
    --- PASS: TestResourcesDeleteDenied/resources_delete_(denied_by_kind)_describes_denial (0.00s)
    --- PASS: TestResourcesDeleteDenied/resources_delete_(denied_by_group)_has_error (0.00s)
    --- PASS: TestResourcesDeleteDenied/resources_delete_(denied_by_group)_describes_denial (0.00s)
    --- PASS: TestResourcesDeleteDenied/resources_delete_(not_denied)_deletes_resource (0.00s)
FAIL
FAIL	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/mcp	11.689s
?   	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/mcp/jobs	[no test files]
=== RUN   TestPlainTextUnstructuredList
=== RUN   TestPlainTextUnstructuredList/processes_the_list
=== RUN   TestPlainTextUnstructuredList/prints_headers
--- PASS: TestPlainTextUnstructuredList (0.00s)
    --- PASS: TestPlainTextUnstructuredList/processes_the_list (0.00s)
    --- PASS: TestPlainTextUnstructuredList/prints_headers (0.00s)
PASS
ok  	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/output	(cached)
=== RUN   TestNewClient
=== RUN   TestNewClient/URL_without_/v3
=== RUN   TestNewClient/URL_with_/v3
=== RUN   TestNewClient/URL_with_trailing_slash
--- PASS: TestNewClient (0.00s)
    --- PASS: TestNewClient/URL_without_/v3 (0.00s)
    --- PASS: TestNewClient/URL_with_/v3 (0.00s)
    --- PASS: TestNewClient/URL_with_trailing_slash (0.00s)
PASS
ok  	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/rancher	(cached)
?   	github.com/netSkopePlatformEng/kubernetes-mcp-server/pkg/version	[no test files]
FAIL
